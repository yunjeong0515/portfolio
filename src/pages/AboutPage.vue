<template>
  <q-page class="aboutpage-container">
    <section class="visual-section">
      <div class="gradient-overlay"></div>
      <canvas id="BlobBg"></canvas>
      <div class="wrapper">
        <div class="contents-wrap">
          <div class="title-wrap">
            <div class="keyworld-wrap">
              <span class="bracket font_ibm font_600">[</span>
              <span class="typing-text font_ibm font_600">{{
                currentEnText
              }}</span>
              <span class="bracket font_ibm font_600">]</span>
            </div>
            <span class="stac-text font_ibm">Publisher</span>
          </div>
          <div class="intro-text">
            <span>안녕하세요! 최적의 디지털 경험을 설계하는 </span>
            <span>1년차 퍼블리셔, 이윤정입니다.</span>
          </div>
          <div class="profile-img">
            <img
              src="../assets/imgs/about/profile_img01.png"
              alt="이윤정 프로필이미지"
            />
          </div>
          <div class="scroll-icon">
            <span class="font_ibm">SCROLL</span>
            <div class="icon">
              <img src="../assets/imgs/icon/arrow_down_b9.svg" alt="" />
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="rolling-section">
      <div class="rolling-wrapper">
        <div class="rolling-content">
          <div class="rolling-item" v-for="n in 10" :key="'name-' + n">
            <span class="font_mon font_300">LEE YUNJEONG</span>
            <div class="circle-icon">
              <div class="dev-icon">
                <svg width="105" height="58" viewBox="0 0 105 58" fill="none">
                  <path
                    d="M77.2891 41.3765L98.6214 29.5825V29.0669L77.2891 17.3374V10.4414L105.002 25.9734V32.676L77.2891 48.208V41.3765Z"
                    fill="white"
                  />
                  <path
                    d="M38.5156 57.8744L60.2346 0H66.4861L44.7671 57.8744H38.5156Z"
                    fill="white"
                  />
                  <path
                    d="M0 32.676V25.9734L27.7127 10.4414V17.2729L6.38036 29.0669V29.5825L27.7127 41.312V48.208L0 32.676Z"
                    fill="white"
                  />
                </svg>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="rolling-wrapper">
        <div class="rolling-content">
          <div class="rolling-item" v-for="n in 10" :key="'job-' + n">
            <span class="font_mon font_300">PUBLISHER</span>
            <div class="rolling-icon">
              <img src="../assets/imgs/about/mac_3d_icon.png" alt="mac" />
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="bio-section parallax__item">
      <div class="wrapper">
        <div class="bio-content-wrap">
          <div class="bio-row row01">
            <div class="video-box">
              <video
                autoplay
                muted
                loop
                src="../assets/video/visual.mp4"
              ></video>
            </div>
            <span class="bio-text font_ibm font_400">I'm Yunjeong Lee!</span>
          </div>
          <div class="bio-row row02">
            <span class="bio-text font_ibm">a Publisher</span>
            <div class="video-box">
              <video
                autoplay
                muted
                loop
                src="../assets/video/visual.mp4"
              ></video>
            </div>
            <span class="bio-text font_ibm font_400"
              >with 1year of practice,</span
            >
          </div>
          <div class="bio-row row03">
            <span class="bio-text font_ibm font_400"
              >crafting optimal digital</span
            >
            <div class="video-box">
              <video
                autoplay
                muted
                loop
                src="../assets/video/visual.mp4"
              ></video>
            </div>
            <span class="bio-text font_ibm font_400">experiences.</span>
          </div>
        </div>
      </div>
    </section>
    <section class="intro-section" ref="introSection">
      <div class="pin-wrapper">
        <div class="sub-title">
          <div class="wrapper">
            <span class="font_ibm">{ What started it? }</span>
          </div>
        </div>
        <div class="title-wrap">
          <h2 class="split-text font_ibm en-text font_400">
            Curiosity about how design is implemented <br />
            on the web led me to start my career as a publisher.
          </h2>
          <p class="kr-text font_ibm font_400">
            디자인이 웹사이트에서 구현되는 과정에 대한 호기심으로 퍼블리셔의
            길을 시작했습니다.
          </p>
        </div>
      </div>
    </section>
    <section class="horizontal-section" ref="horizontalSection">
      <div class="pin-wrapper">
        <div class="sub-title">
          <div class="wrapper">
            <span class="font_ibm">{ Profile }</span>
          </div>
        </div>

        <div class="horizontal-inner" ref="horizontalInner">
          <div class="identity-section one-page">
            <div class="wrapper">
              <div class="contents-inner">
                <div class="img-area">
                  <div class="profile-img">
                    <img
                      src="../assets/imgs/about/profile_img02.png"
                      alt="이윤정 프로필이미지"
                    />
                  </div>
                </div>
                <div class="text-area">
                  <div class="title-wrap">
                    <h2 class="font_ibm font_400">&lt;Identity/&gt;</h2>
                    <p class="font_400">
                      단순히 보이는 화면을 만드는 것이 아니라, <br />시간이
                      지나도 유지되고 확장될 수 있는 코드를 고민합니다.
                    </p>
                  </div>
                  <div class="scrolling-svg-text">
                    <svg
                      width="969"
                      height="189"
                      viewBox="0 0 969 189"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M3.4089 188.195L0.0758136 162.611L4.04229 162.095L4.58489 166.259L4.78321 166.234C4.96582 165.571 5.21885 164.933 5.54229 164.319C5.86143 163.673 6.27396 163.098 6.7799 162.595C7.31889 162.088 7.96781 161.65 8.72665 161.283C9.4855 160.915 10.3938 160.662 11.4515 160.524C14.1289 160.175 16.3894 160.755 18.2329 162.263C20.0722 163.737 21.1942 166.028 21.599 169.135L23.7371 185.547L19.7706 186.064L17.723 170.346C17.4172 167.999 16.6788 166.331 15.5077 165.341C14.3323 164.317 12.753 163.935 10.7698 164.193C9.97647 164.296 9.21262 164.497 8.47822 164.794C7.74382 165.091 7.10497 165.477 6.56167 165.951C6.01837 166.426 5.60584 167 5.32406 167.676C5.04229 168.351 4.95523 169.102 5.06289 169.928L7.37538 187.678L3.4089 188.195ZM45.5239 181.983C43.7663 182.372 42.1031 182.415 40.5344 182.113C38.9981 181.804 37.5997 181.191 36.339 180.275C35.1037 179.319 34.0495 178.101 33.1764 176.621C32.2961 175.108 31.633 173.343 31.1872 171.325C30.7485 169.34 30.6099 167.476 30.7711 165.733C30.9323 163.991 31.3754 162.442 32.1001 161.087C32.8503 159.693 33.8568 158.531 35.1198 157.604C36.4153 156.669 37.9419 156.007 39.6995 155.619C41.4571 155.231 43.104 155.191 44.6402 155.501C46.209 155.803 47.611 156.432 48.8463 157.388C50.107 158.304 51.1775 159.518 52.0578 161.031C52.9381 162.543 53.5976 164.292 54.0362 166.277C54.4821 168.295 54.6243 170.176 54.4631 171.918C54.2947 173.628 53.8354 175.18 53.0852 176.575C52.3605 177.93 51.3503 179.075 50.0548 180.01C48.7918 180.937 47.2815 181.595 45.5239 181.983ZM44.7797 178.615C46.9604 178.133 48.5742 177.094 49.6211 175.497C50.668 173.9 50.8894 171.735 50.2854 169.001L49.4872 165.388C48.8832 162.654 47.7701 160.783 46.148 159.776C44.5259 158.769 42.6245 158.506 40.4437 158.988C38.263 159.47 36.6492 160.509 35.6023 162.106C34.5554 163.703 34.334 165.868 34.938 168.602L35.7362 172.215C36.3402 174.949 37.4533 176.82 39.0754 177.827C40.6975 178.834 42.5989 179.096 44.7797 178.615ZM77.9398 172.711C76.0653 173.306 74.5169 173.221 73.2944 172.455C72.1037 171.679 71.246 170.465 70.7214 168.813L65.7277 153.087L57.531 155.69L56.502 152.449L62.6018 150.512C63.4279 150.25 63.9493 149.909 64.1661 149.491C64.4046 149.03 64.3927 148.387 64.1304 147.561L62.0875 141.128L65.7569 139.962L68.5111 148.636L79.71 145.08L80.739 148.32L69.5401 151.876L75.2905 169.985L86.4894 166.429L87.5184 169.67L77.9398 172.711ZM130.926 159.069L142.118 153.502L129.201 127.537L117.607 133.305L116.092 130.261L131.268 122.711L144.585 149.482C145.357 151.034 145.571 152.51 145.225 153.911C144.909 155.296 143.871 156.427 142.11 157.303L132.44 162.113L130.926 159.069ZM126.939 118.499C125.894 119.018 125.059 119.173 124.433 118.963C123.793 118.723 123.309 118.275 122.983 117.619L122.626 116.902C122.3 116.246 122.241 115.605 122.451 114.979C122.647 114.323 123.266 113.736 124.311 113.216C125.355 112.697 126.198 112.557 126.839 112.796C127.464 113.006 127.94 113.44 128.267 114.096L128.623 114.813C128.95 115.469 129.016 116.125 128.821 116.781C128.611 117.406 127.983 117.979 126.939 118.499ZM168.822 126.957L168.648 127.055C168.726 127.737 168.738 128.438 168.684 129.157C168.613 129.847 168.423 130.528 168.113 131.2C167.831 131.856 167.408 132.496 166.841 133.121C166.275 133.746 165.527 134.32 164.598 134.843C162.245 136.168 159.94 136.49 157.683 135.81C155.409 135.1 153.504 133.381 151.967 130.65L143.848 116.229L147.333 114.266L155.109 128.078C156.27 130.14 157.587 131.426 159.059 131.936C160.516 132.417 162.115 132.167 163.858 131.185C164.555 130.793 165.189 130.322 165.759 129.771C166.329 129.221 166.777 128.624 167.104 127.981C167.43 127.338 167.606 126.666 167.631 125.963C167.64 125.231 167.432 124.488 167.007 123.732L158.226 108.134L161.711 106.172L174.368 128.654L170.882 130.616L168.822 126.957ZM194.262 117.745C191.94 119.122 189.704 119.926 187.553 120.155C185.414 120.339 183.366 120.12 181.408 119.498L182.531 116.1C184.255 116.588 185.927 116.76 187.545 116.613C189.164 116.467 190.862 115.867 192.639 114.812C194.359 113.792 195.585 112.658 196.318 111.409C197.062 110.115 197.042 108.809 196.26 107.49C195.92 106.917 195.525 106.512 195.074 106.275C194.636 105.993 194.162 105.848 193.653 105.839C193.144 105.831 192.627 105.906 192.1 106.063C191.556 106.192 191.001 106.366 190.434 106.586L186.644 108.137C185.802 108.481 184.863 108.825 183.827 109.169C182.819 109.495 181.815 109.665 180.814 109.677C179.797 109.66 178.809 109.432 177.851 108.993C176.921 108.537 176.099 107.707 175.385 106.503C174.722 105.385 174.367 104.297 174.321 103.239C174.286 102.135 174.509 101.073 174.988 100.052C175.451 99.0027 176.15 98.0258 177.087 97.1215C178.006 96.1886 179.111 95.3395 180.401 94.5741C182.408 93.3837 184.329 92.6701 186.165 92.4335C188.03 92.1798 189.825 92.2974 191.549 92.7862L190.563 96.2199C190.118 96.0576 189.601 95.9378 189.012 95.8605C188.436 95.7376 187.784 95.7172 187.058 95.7993C186.343 95.8358 185.562 95.9891 184.714 96.2593C183.867 96.5294 182.956 96.9536 181.981 97.5319C180.232 98.5693 179.063 99.6696 178.474 100.833C177.914 101.979 177.974 103.126 178.655 104.272C178.995 104.846 179.384 105.274 179.823 105.556C180.273 105.793 180.753 105.915 181.262 105.923C181.77 105.931 182.297 105.871 182.84 105.742C183.396 105.568 183.943 105.379 184.481 105.176L188.27 103.626C189.141 103.264 190.08 102.92 191.088 102.594C192.096 102.267 193.109 102.112 194.126 102.129C195.127 102.117 196.092 102.339 197.021 102.795C197.979 103.234 198.816 104.056 199.53 105.26C200.839 107.467 200.991 109.683 199.985 111.908C199.008 114.115 197.101 116.061 194.262 117.745ZM222.786 100.305C221.085 101.292 219.555 101.544 218.195 101.062C216.865 100.562 215.764 99.563 214.894 98.0639L206.61 83.7941L199.173 88.1117L197.466 85.1712L203.001 81.9581C203.75 81.523 204.185 81.0776 204.306 80.622C204.439 80.1208 204.288 79.4955 203.853 78.7459L200.464 72.9083L203.794 70.9754L208.363 78.8454L218.525 72.9463L220.231 75.8868L210.07 81.7859L219.609 98.2178L229.77 92.3187L231.477 95.2592L222.786 100.305ZM277.27 72.7116L259.154 52.1441L262.919 50.65L270.342 59.3231L278.358 68.6756L278.544 68.6018L277.964 56.2979L277.418 44.8948L281.09 43.4375L282.01 70.8301L277.27 72.7116ZM304.605 30.812C303.471 31.086 302.622 31.051 302.059 30.707C301.488 30.3306 301.116 29.786 300.944 29.0732L300.756 28.2955C300.584 27.5827 300.67 26.9447 301.014 26.3815C301.35 25.7859 302.085 25.351 303.219 25.077C304.353 24.803 305.205 24.8542 305.776 25.2306C306.34 25.5746 306.707 26.103 306.88 26.8158L307.068 27.5934C307.24 28.3062 307.158 28.9605 306.822 29.5561C306.478 30.1193 305.739 30.5379 304.605 30.812ZM300.221 60.78L309.261 58.5956L304.798 40.1271L295.758 42.3115L294.96 39.0066L307.887 35.8827L313.149 57.6561L321.605 55.6126L322.404 58.9175L301.019 64.0849L300.221 60.78ZM342.711 57.2681C340.017 57.4515 337.659 57.1611 335.635 56.3968C333.643 55.5969 331.913 54.4786 330.445 53.0416L332.979 50.5136C334.298 51.7268 335.713 52.6328 337.224 53.2315C338.735 53.8303 340.521 54.0594 342.583 53.919C344.578 53.7831 346.184 53.323 347.4 52.5385C348.647 51.7186 349.219 50.5437 349.115 49.0139C349.07 48.3488 348.899 47.8091 348.604 47.3949C348.339 46.9452 347.982 46.602 347.531 46.3654C347.081 46.1288 346.585 45.9621 346.044 45.8653C345.5 45.7352 344.926 45.6407 344.321 45.5817L340.239 45.2582C339.332 45.1864 338.339 45.0703 337.259 44.9099C336.212 44.7474 335.239 44.4461 334.34 44.0061C333.44 43.5329 332.66 42.8843 332.003 42.0604C331.379 41.2343 331.019 40.1228 330.924 38.726C330.836 37.429 331.009 36.298 331.444 35.3328C331.911 34.3322 332.588 33.4842 333.476 32.7889C334.362 32.0604 335.427 31.5034 336.67 31.118C337.911 30.6994 339.28 30.4392 340.777 30.3373C343.105 30.1787 345.142 30.4075 346.887 31.0237C348.667 31.6375 350.216 32.5511 351.534 33.7643L349.107 36.3853C348.783 36.0398 348.375 35.7001 347.885 35.3659C347.425 34.9963 346.853 34.6845 346.167 34.4305C345.513 34.1409 344.746 33.9258 343.868 33.7852C342.99 33.6445 341.985 33.6127 340.855 33.6897C338.826 33.8278 337.287 34.2835 336.237 35.0566C335.22 35.8274 334.757 36.878 334.848 38.2083C334.893 38.8734 335.048 39.4308 335.312 39.8805C335.608 40.2948 335.981 40.6202 336.431 40.8568C336.882 41.0934 337.379 41.2767 337.922 41.4068C338.497 41.5013 339.07 41.5792 339.642 41.6405L343.723 41.9639C344.664 42.0335 345.657 42.1496 346.704 42.3122C347.751 42.4748 348.725 42.7927 349.625 43.2659C350.524 43.7059 351.286 44.339 351.91 45.1651C352.567 45.989 352.944 47.0994 353.039 48.4961C353.213 51.0569 352.35 53.1035 350.45 54.6362C348.583 56.1666 346.003 57.0439 342.711 57.2681ZM381.177 53.3644L380.978 53.345C380.651 53.9496 380.26 54.5312 379.803 55.0897C379.351 55.6151 378.805 56.0644 378.165 56.4377C377.56 56.8142 376.846 57.0965 376.024 57.2846C375.202 57.4727 374.26 57.5152 373.198 57.4121C370.511 57.1511 368.436 56.0956 366.975 54.2457C365.517 52.3626 364.939 49.8617 365.242 46.743L366.842 30.2705L370.823 30.6572L369.291 46.433C369.062 48.7885 369.406 50.5969 370.321 51.858C371.24 53.0859 372.695 53.7965 374.686 53.9898C375.482 54.0672 376.271 54.0434 377.054 53.9184C377.836 53.7935 378.545 53.5609 379.181 53.2208C379.817 52.8807 380.346 52.4297 380.769 51.868C381.196 51.2731 381.451 50.5443 381.534 49.6817L383.265 31.8655L387.246 32.2522L384.752 57.9314L380.771 57.5447L381.177 53.3644ZM416.104 64.5199C414.582 64.1478 413.592 63.494 413.135 62.5586C412.677 61.6231 412.51 60.5528 412.633 59.3475L412.39 59.2881C411.483 60.6106 410.312 61.5424 408.876 62.0834C407.48 62.5999 405.762 62.6088 403.722 62.11C401.099 61.4687 399.177 60.2781 397.955 58.5381C396.733 56.7981 396.412 54.7463 396.99 52.3826C397.56 50.0513 398.841 48.4601 400.833 47.609C402.858 46.7658 405.765 46.8074 409.553 47.7337L414.896 49.04L415.502 46.563C415.953 44.7174 415.771 43.2146 414.957 42.0546C414.15 40.8622 412.792 40.0325 410.881 39.5654C409.198 39.1537 407.738 39.1572 406.504 39.5759C405.277 39.9622 404.201 40.6428 403.276 41.6178L401.129 39.0337C401.611 38.4653 402.202 37.9408 402.903 37.4602C403.604 36.9795 404.415 36.6115 405.335 36.3562C406.263 36.0684 407.277 35.9217 408.377 35.916C409.484 35.8779 410.669 36.0133 411.932 36.3221C414.878 37.0425 417.028 38.3573 418.38 40.2664C419.764 42.1834 420.131 44.4694 419.482 47.1245L416.109 60.9182L419.606 61.7732L418.775 65.1731L416.104 64.5199ZM405.197 59.0221C406.201 59.2676 407.136 59.3759 408 59.3472C408.906 59.294 409.713 59.1484 410.424 58.9102C411.142 58.6397 411.73 58.2688 412.188 57.7976C412.687 57.3018 413.016 56.7302 413.174 56.0826L414.183 51.9542L408.841 50.6478C406.509 50.0778 404.73 49.9859 403.503 50.3723C402.277 50.7586 401.513 51.5669 401.212 52.7974L400.963 53.8173C400.646 55.1125 400.858 56.2109 401.598 57.1126C402.379 57.9897 403.578 58.6263 405.197 59.0221ZM428.516 64.5384L436.964 67.6424L447.38 39.2955L438.932 36.1914L440.105 33.0001L452.307 37.4837L440.718 69.022L449.166 72.1261L447.994 75.3175L427.343 67.7297L428.516 64.5384ZM468.58 76.7782L474.433 79.4892L463.394 89.6397L460.355 88.2317L468.58 76.7782ZM530.799 71.6086L534.536 73.0351L529.044 87.4225L529.231 87.4938C531.929 85.0986 534.976 84.5489 538.37 85.8447C541.328 86.974 543.211 88.9592 544.017 91.8003C544.855 94.6533 544.513 98.0728 542.991 102.059C541.47 106.045 539.446 108.823 536.92 110.392C534.426 111.973 531.699 112.199 528.741 111.069C525.346 109.774 523.441 107.334 523.025 103.75L522.839 103.678L521.341 107.602L517.604 106.176L530.799 71.6086ZM528.559 107.2C530.739 108.032 532.67 108.02 534.353 107.164C536.078 106.288 537.357 104.761 538.189 102.581L539.759 98.4701C540.591 96.2902 540.649 94.3145 539.934 92.5429C539.262 90.7521 537.836 89.4406 535.656 88.6085C534.815 88.2875 533.979 88.0933 533.149 88.026C532.318 87.9587 531.539 88.0361 530.812 88.2581C530.097 88.4489 529.45 88.7904 528.869 89.2825C528.332 89.7553 527.909 90.3965 527.6 91.2062L524.283 99.8947C523.974 100.704 523.856 101.48 523.93 102.222C524.047 102.944 524.302 103.63 524.696 104.28C525.102 104.899 525.637 105.46 526.301 105.964C526.966 106.467 527.718 106.879 528.559 107.2ZM564.914 118.2L564.722 118.142C564.282 118.67 563.784 119.163 563.226 119.62C562.678 120.045 562.054 120.378 561.354 120.617C560.685 120.866 559.93 121.002 559.087 121.024C558.244 121.045 557.312 120.901 556.292 120.59C553.709 119.802 551.885 118.357 550.818 116.255C549.762 114.12 549.69 111.554 550.604 108.557L555.431 92.727L559.257 93.8937L554.634 109.054C553.944 111.318 553.923 113.159 554.571 114.576C555.229 115.962 556.514 116.946 558.427 117.529C559.192 117.763 559.971 117.896 560.763 117.928C561.554 117.96 562.295 117.872 562.986 117.665C563.677 117.457 564.285 117.12 564.81 116.653C565.346 116.154 565.74 115.49 565.993 114.661L571.214 97.5397L575.04 98.7064L567.515 123.385L563.689 122.218L564.914 118.2ZM590.452 128.955C588.53 128.541 587.228 127.698 586.547 126.427C585.899 125.162 585.757 123.682 586.122 121.988L589.595 105.857L581.188 104.047L581.903 100.723L588.16 102.07C589.007 102.253 589.629 102.216 590.025 101.961C590.461 101.679 590.77 101.115 590.952 100.268L592.373 93.669L596.137 94.4794L594.221 103.376L605.708 105.849L604.992 109.173L593.505 106.699L589.506 125.274L600.993 127.747L600.277 131.071L590.452 128.955ZM653.88 136.395C651.18 136.419 648.843 135.99 646.869 135.107C644.927 134.191 643.266 132.972 641.886 131.451L644.565 129.077C645.81 130.366 647.169 131.354 648.641 132.041C650.114 132.728 651.884 133.062 653.951 133.044C655.95 133.026 657.581 132.662 658.841 131.951C660.134 131.206 660.774 130.067 660.761 128.533C660.755 127.867 660.617 127.318 660.346 126.887C660.109 126.422 659.772 126.059 659.336 125.796C658.901 125.533 658.416 125.337 657.881 125.209C657.346 125.047 656.778 124.919 656.178 124.824L652.122 124.26C651.221 124.135 650.236 123.96 649.168 123.736C648.132 123.512 647.179 123.154 646.308 122.662C645.437 122.136 644.697 121.443 644.089 120.581C643.515 119.72 643.222 118.589 643.209 117.189C643.198 115.889 643.438 114.77 643.929 113.832C644.454 112.861 645.18 112.055 646.108 111.413C647.035 110.738 648.131 110.245 649.395 109.934C650.659 109.589 652.04 109.41 653.54 109.397C655.874 109.376 657.893 109.725 659.6 110.443C661.34 111.161 662.832 112.164 664.077 113.453L661.499 115.926C661.195 115.562 660.809 115.199 660.339 114.837C659.902 114.44 659.349 114.095 658.68 113.801C658.043 113.474 657.291 113.214 656.423 113.021C655.554 112.829 654.553 112.738 653.42 112.748C651.387 112.766 649.823 113.13 648.73 113.84C647.669 114.549 647.145 115.571 647.157 116.904C647.163 117.57 647.284 118.136 647.522 118.601C647.792 119.032 648.145 119.378 648.581 119.641C649.017 119.904 649.502 120.116 650.037 120.278C650.605 120.407 651.172 120.518 651.74 120.613L655.795 121.177C656.73 121.302 657.715 121.477 658.75 121.701C659.785 121.925 660.739 122.3 661.61 122.826C662.481 123.318 663.204 123.995 663.778 124.856C664.386 125.718 664.696 126.848 664.708 128.248C664.731 130.815 663.749 132.807 661.761 134.225C659.807 135.642 657.18 136.366 653.88 136.395ZM691.376 128.642L691.177 128.668C690.998 129.332 690.751 129.988 690.435 130.636C690.115 131.252 689.687 131.814 689.151 132.324C688.648 132.83 688.018 133.269 687.261 133.641C686.504 134.013 685.597 134.27 684.54 134.414C681.865 134.777 679.603 134.226 677.756 132.762C675.904 131.264 674.768 128.962 674.346 125.858L672.119 109.458L676.083 108.92L678.216 124.626C678.534 126.971 679.284 128.652 680.465 129.669C681.641 130.653 683.22 131.01 685.202 130.741C685.995 130.634 686.757 130.429 687.49 130.128C688.223 129.826 688.86 129.437 689.401 128.96C689.941 128.483 690.353 127.923 690.636 127.279C690.914 126.602 690.994 125.834 690.878 124.975L688.469 107.238L692.433 106.7L695.904 132.265L691.941 132.803L691.376 128.642ZM718.144 127.971C715.533 128.657 713.162 128.814 711.031 128.443C708.924 128.031 707.015 127.257 705.304 126.121L707.319 123.162C708.842 124.106 710.401 124.731 711.998 125.036C713.594 125.34 715.392 125.23 717.391 124.706C719.325 124.198 720.816 123.445 721.863 122.446C722.935 121.407 723.276 120.145 722.886 118.662C722.717 118.017 722.448 117.519 722.081 117.168C721.736 116.776 721.321 116.506 720.834 116.358C720.347 116.21 719.829 116.139 719.279 116.146C718.721 116.12 718.139 116.135 717.533 116.19L713.464 116.638C712.559 116.738 711.562 116.81 710.471 116.855C709.412 116.892 708.4 116.778 707.435 116.515C706.461 116.219 705.574 115.728 704.774 115.042C704.006 114.348 703.444 113.324 703.088 111.969C702.758 110.712 702.717 109.569 702.963 108.539C703.234 107.468 703.74 106.508 704.482 105.659C705.215 104.777 706.157 104.03 707.306 103.419C708.446 102.775 709.742 102.262 711.193 101.881C713.45 101.289 715.493 101.132 717.324 101.409C719.186 101.678 720.879 102.285 722.402 103.229L720.509 106.259C720.126 105.981 719.662 105.723 719.118 105.487C718.597 105.21 717.976 105.012 717.255 104.891C716.558 104.729 715.765 104.662 714.876 104.688C713.987 104.715 712.994 104.872 711.898 105.16C709.931 105.676 708.505 106.412 707.619 107.368C706.765 108.316 706.507 109.435 706.845 110.725C707.015 111.37 707.271 111.888 707.616 112.28C707.984 112.632 708.411 112.881 708.898 113.029C709.385 113.177 709.907 113.264 710.465 113.29C711.047 113.275 711.625 113.244 712.198 113.197L716.268 112.749C717.205 112.641 718.202 112.568 719.261 112.532C720.32 112.495 721.336 112.625 722.31 112.921C723.275 113.184 724.142 113.663 724.91 114.357C725.71 115.043 726.288 116.063 726.643 117.418C727.295 119.9 726.831 122.072 725.252 123.934C723.706 125.788 721.336 127.133 718.144 127.971ZM749.812 117.344C747.97 118.032 746.419 118.025 745.159 117.321C743.931 116.606 743.014 115.437 742.407 113.813L736.629 98.3578L728.573 101.369L727.383 98.1845L733.378 95.9434C734.189 95.64 734.693 95.2737 734.889 94.8448C735.104 94.3729 735.059 93.7311 734.756 92.9193L732.392 86.5967L735.999 85.2485L739.185 93.7724L750.191 89.6579L751.382 92.8426L740.376 96.9571L747.029 114.754L758.035 110.64L759.225 113.824L749.812 117.344ZM787.514 101.374C786.089 102.025 784.907 102.126 783.968 101.675C783.03 101.225 782.235 100.489 781.584 99.4667L781.357 99.5707C781.465 101.17 781.124 102.628 780.332 103.943C779.557 105.213 778.214 106.285 776.304 107.158C773.849 108.281 771.602 108.538 769.565 107.93C767.528 107.322 766.003 105.911 764.992 103.698C763.994 101.516 764.013 99.4727 765.049 97.5697C766.115 95.6529 768.422 93.8838 771.969 92.2623L776.971 89.9757L775.911 87.6565C775.121 85.9285 774.047 84.8618 772.688 84.4565C771.316 84.0208 769.736 84.2117 767.948 85.0294C766.371 85.75 765.228 86.6573 764.519 87.7513C763.796 88.815 763.373 90.0159 763.252 91.3541L759.965 90.6577C759.991 89.9128 760.13 89.1346 760.382 88.323C760.634 87.5114 761.042 86.7201 761.606 85.9492C762.156 85.148 762.861 84.4044 763.72 83.7184C764.565 83.0021 765.579 82.3737 766.761 81.8332C769.52 80.5721 772.022 80.2716 774.266 80.9316C776.54 81.5778 778.246 83.1438 779.382 85.6297L785.286 98.5443L788.56 97.0476L790.015 100.231L787.514 101.374ZM775.548 103.82C776.488 103.391 777.288 102.897 777.949 102.338C778.626 101.735 779.17 101.12 779.58 100.493C779.975 99.8357 780.207 99.18 780.275 98.5261C780.359 97.8279 780.262 97.1757 779.985 96.5694L778.218 92.7041L773.216 94.9908C771.033 95.9886 769.58 97.0193 768.857 98.083C768.134 99.1466 768.035 100.254 768.562 101.406L768.999 102.361C769.553 103.574 770.4 104.305 771.54 104.553C772.696 104.758 774.032 104.513 775.548 103.82ZM795.361 62.565C794.317 63.085 793.482 63.2401 792.856 63.0304C792.216 62.7908 791.732 62.3427 791.405 61.6862L791.049 60.9701C790.722 60.3136 790.663 59.6725 790.873 59.0468C791.068 58.3912 791.687 57.8034 792.732 57.2834C793.776 56.7635 794.619 56.6233 795.259 56.8629C795.885 57.0726 796.361 57.5057 796.688 58.1622L797.045 58.8784C797.372 59.5348 797.438 60.1909 797.243 60.8464C797.033 61.4722 796.406 62.045 795.361 62.565ZM797.77 92.7561L806.095 88.6111L797.627 71.6026L789.302 75.7476L787.786 72.7039L799.692 66.7762L809.676 86.8283L817.464 82.9507L818.979 85.9944L799.285 95.7997L797.77 92.7561ZM827.998 81.4938L816.457 58.4193L820.034 56.6299L821.913 60.3862L822.092 60.2968C822.047 59.6111 822.077 58.9253 822.181 58.2396C822.271 57.524 822.472 56.8457 822.785 56.2047C823.128 55.5487 823.597 54.9225 824.193 54.3262C824.789 53.7298 825.565 53.193 826.518 52.7159C828.933 51.508 831.259 51.3139 833.495 52.1335C835.716 52.9232 837.528 54.7193 838.929 57.5216L846.333 72.3233L842.755 74.1127L835.665 59.937C834.606 57.8204 833.361 56.4864 831.93 55.935C830.484 55.3539 828.867 55.5106 827.078 56.4053C826.363 56.7632 825.707 57.203 825.11 57.7249C824.514 58.2467 824.037 58.8207 823.68 59.4468C823.322 60.073 823.121 60.7513 823.076 61.4818C823.032 62.2122 823.196 62.9501 823.568 63.6954L831.576 79.7045L827.998 81.4938ZM875.076 58.6539C873.658 59.3187 872.477 59.4304 871.534 58.9888C870.591 58.5473 869.789 57.8186 869.129 56.8027L868.902 56.9088C869.026 58.5075 868.698 59.968 867.919 61.2903C867.155 62.5682 865.823 63.6527 863.921 64.5438C861.477 65.6895 859.233 65.968 857.19 65.3792C855.147 64.7904 853.609 63.3943 852.577 61.1909C851.558 59.0177 851.558 56.9747 852.576 55.0621C853.624 53.1353 855.914 51.3444 859.445 49.6895L864.426 47.3557L863.344 45.0467C862.537 43.3262 861.453 42.2697 860.091 41.8772C858.715 41.4545 857.137 41.6604 855.356 42.4949C853.787 43.2304 852.652 44.1485 851.953 45.2491C851.24 46.3195 850.829 47.5244 850.721 48.8637L847.427 48.1984C847.446 47.4533 847.578 46.6737 847.822 45.8598C848.066 45.0459 848.467 44.2508 849.023 43.4746C849.566 42.6683 850.263 41.918 851.116 41.2239C851.955 40.4997 852.963 39.8617 854.14 39.3101C856.886 38.023 859.385 37.6988 861.635 38.3376C863.916 38.9622 865.636 40.5121 866.796 42.9871L872.821 55.8453L876.081 54.3178L877.566 57.487L875.076 58.6539ZM863.134 61.2133C864.07 60.7749 864.865 60.2732 865.521 59.7083C866.192 59.0991 866.73 58.479 867.134 57.848C867.523 57.1869 867.749 56.529 867.81 55.8745C867.888 55.1756 867.785 54.5243 867.502 53.9206L865.699 50.0722L860.718 52.406C858.545 53.4244 857.102 54.4689 856.389 55.5393C855.676 56.6097 855.588 57.7184 856.125 58.8654L856.571 59.8162C857.137 61.0235 857.991 61.7461 859.133 61.9839C860.291 62.1774 861.625 61.9205 863.134 61.2133ZM872.516 19.3163L876.221 17.8074L882.03 32.0698L882.215 31.9944C882.552 28.4021 884.402 25.9207 887.767 24.5501C890.7 23.3556 893.431 23.5211 895.96 25.0465C898.519 26.5594 900.604 29.2916 902.213 33.243C903.823 37.1945 904.24 40.6057 903.466 43.4765C902.723 46.3347 900.885 48.3611 897.952 49.5556C894.587 50.9261 891.529 50.4439 888.779 48.109L888.593 48.1844L890.178 52.0742L886.473 53.583L872.516 19.3163ZM895.177 46.8525C897.338 45.9723 898.741 44.6451 899.386 42.8707C900.05 41.0529 899.941 39.0635 899.061 36.9025L897.401 32.8276C896.521 30.6666 895.215 29.183 893.483 28.3768C891.769 27.5271 889.832 27.5424 887.671 28.4226C886.837 28.762 886.094 29.1907 885.441 29.7086C884.788 30.2264 884.272 30.8146 883.892 31.4732C883.5 32.1008 883.26 32.7925 883.172 33.5482C883.102 34.2605 883.231 35.018 883.558 35.8206L887.066 44.4336C887.393 45.2362 887.836 45.8834 888.396 46.3751C888.975 46.8233 889.63 47.1504 890.362 47.3563C891.081 47.5312 891.855 47.5759 892.684 47.4902C893.513 47.4046 894.344 47.192 895.177 46.8525ZM914.882 38.6416L923.428 35.8185L913.955 7.14269L905.409 9.96573L904.343 6.73733L916.687 2.6596L927.226 34.5639L935.772 31.7408L936.838 34.9692L915.949 41.87L914.882 38.6416ZM958.118 29.7736C956.307 30.2263 954.597 30.3274 952.988 30.0769C951.412 29.8182 949.965 29.2523 948.647 28.3792C947.353 27.4657 946.234 26.2854 945.288 24.8383C944.334 23.3589 943.61 21.6328 943.117 19.6602C942.616 17.6553 942.438 15.7756 942.583 14.0213C942.761 12.2589 943.21 10.6864 943.929 9.30393C944.641 7.88912 945.615 6.70067 946.852 5.73858C948.121 4.7684 949.612 4.06905 951.326 3.64053C953.008 3.22009 954.605 3.14729 956.116 3.42212C957.661 3.68887 959.055 4.25071 960.3 5.10763C961.537 5.93222 962.6 7.0236 963.49 8.38178C964.379 9.73996 965.046 11.3083 965.491 13.0869L965.952 14.9302L947.422 19.5631L947.713 20.7273C947.988 21.8267 948.42 22.8009 949.011 23.6498C949.601 24.4986 950.304 25.1818 951.121 25.6991C951.97 26.2085 952.912 26.5399 953.946 26.6935C955.005 26.8066 956.117 26.7177 957.281 26.4266C958.963 26.0062 960.321 25.2543 961.356 24.1709C962.391 23.0876 963.062 21.7859 963.369 20.266L966.716 21.4907C966.392 23.3583 965.495 25.0601 964.024 26.5962C962.577 28.0919 960.608 29.151 958.118 29.7736ZM952.127 6.84198C951.06 7.1088 950.122 7.54943 949.313 8.16387C948.505 8.77832 947.846 9.50998 947.337 10.3589C946.86 11.1997 946.545 12.1375 946.391 13.1723C946.262 14.1667 946.334 15.2137 946.609 16.3131L946.694 16.6527L961.052 13.0628L960.919 12.5292C960.644 11.4297 960.215 10.4717 959.633 9.65519C959.084 8.83059 958.421 8.17172 957.645 7.67858C956.893 7.14502 956.036 6.80954 955.074 6.67212C954.144 6.52663 953.162 6.58325 952.127 6.84198Z"
                        fill="#B0C7FA"
                      />
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="focus-section one-page">
            <div class="inner">
              <div class="title-wrap">
                <h2 class="font_ibm font_400">&lt;Focus/&gt;</h2>
                <p class="font_500">
                  유지보수를 전제로 마크업합니다. <br />
                  반복을 줄이고, 수정에 강한 구조를 선호합니다.
                </p>
              </div>
              <div id="three-container"></div>
            </div>
          </div>
          <div class="workflow-section one-page is-dark-bg">
            <div class=" content-wrap">
              <div class="inner text-center">
                <div class="workflow-tags">
                  <span class="tag font_mon font_700">DESIGN</span>
                  <span class="tag font_mon font_700">CODE</span>
                  <span class="tag font_mon font_700">EXPERIENCE</span>
                </div>
                <div class="title-wrap">
                  <h2 class="font_ibm">&lt;Workflow/&gt;</h2>
                  <p>
                    디자인 의도를 이해하고 <br />구조를 해석해 웹 위에
                    구현합니다.
                  </p>
                </div>
              </div>
            </div>

            <!-- <div class="hidden-content content-wrap">
              <div class="inner text-center">
                <div class="workflow-tags">
                  <span class="tag font_mon font_700">DESIGN</span>
                  <span class="tag font_mon font_700">CODE</span>
                  <span class="tag font_mon font_700">EXPERIENCE</span>
                </div>
                <div class="title-wrap">
                  <h2 class="font_ibm">&lt;Workflow/&gt;</h2>
                  <p>
                    디자인 의도를 이해하고 <br />구조를 해석해 웹 위에
                    구현합니다.
                  </p>
                </div>
              </div>
            </div> -->
          </div>
        </div>
      </div>
    </section>
    <!-- <section class="project-section">
      <div class="title-wrap">
        <span class="">SELECTED</span>
        <h2>PROJECT</h2>
        <span class="">2024~2025</span>
      </div>
    </section>
    <section class="project-list-section">
      <div class="wrapper">
        <div id="gsap-container" ref="containerRef"></div>
      </div>
    </section> -->
  </q-page>
</template>

<script>
// ⭐ useMouse는 @vueuse/core에서, 나머지는 vue 자체에서 가져옵니다.
import { useMouse } from "@vueuse/core";
import { shallowRef, ref, nextTick } from "vue";
import * as THREE from "three";
import { RoundedBoxGeometry } from "three/addons/geometries/RoundedBoxGeometry.js";
import { OrbitControls } from "three/addons/controls/OrbitControls.js";
import { gsap } from "gsap";
import { projects } from "src/data/projects";
import { onMounted } from "vue";
import { ScrollTrigger } from "gsap/ScrollTrigger";

gsap.registerPlugin(ScrollTrigger);

// ============================================
// Three.js 셰이더 코드 (Vertex 및 Fragment)
// ============================================

const vertexShader = `
    varying vec2 vUv;
    void main() {
      vec3 pos = position.xyz;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.);
      vUv = uv;
    }
  `;

const fragmentShader = `
    uniform float uTime;
    uniform vec2 uResolution;
    uniform vec3 uColor1;
    uniform vec3 uColor2;
    uniform vec3 uColor3;
    uniform vec3 uColor4;
    uniform vec3 uColor5;
    uniform vec3 uColor6;
    uniform float uSpeed;
    uniform float uIntensity;
    uniform sampler2D uTouchTexture;
    uniform float uGrainIntensity;
    uniform float uZoom;
    uniform vec3 uDarkNavy;
    uniform float uGradientSize;
    uniform float uGradientCount;
    uniform float uColor1Weight;
    uniform float uColor2Weight;

    varying vec2 vUv;

    #define PI 3.14159265359

    // Grain function for film grain effect
    float grain(vec2 uv, float time) {
      vec2 grainUv = uv * uResolution * 0.5;
      float grainValue = fract(sin(dot(grainUv + time, vec2(12.9898, 78.233))) * 43758.5453);
      return grainValue * 2.0 - 1.0;
    }

    vec3 getGradientColor(vec2 uv, float time) {
      float gradientRadius = uGradientSize;

      // Multiple animated centers
      vec2 center1 = vec2(0.5 + sin(time * uSpeed * 0.4) * 0.4, 0.5 + cos(time * uSpeed * 0.5) * 0.4);
    vec2 center2 = vec2(0.5 + cos(time * uSpeed * 0.6 + 1.0) * 0.5, 0.5 + sin(time * uSpeed * 0.45 + 0.5) * 0.5);
    vec2 center3 = vec2(0.5 + sin(time * uSpeed * 0.35 + 2.0) * 0.45, 0.5 + cos(time * uSpeed * 0.55 + 1.5) * 0.45);
    vec2 center4 = vec2(0.5 + cos(time * uSpeed * 0.5 + 3.0) * 0.4, 0.5 + sin(time * uSpeed * 0.4 + 2.5) * 0.4);
    vec2 center5 = vec2(0.5 + sin(time * uSpeed * 0.7 + 4.0) * 0.35, 0.5 + cos(time * uSpeed * 0.6 + 3.5) * 0.35);
    vec2 center6 = vec2(0.5 + cos(time * uSpeed * 0.45 + 5.0) * 0.5, 0.5 + sin(time * uSpeed * 0.65 + 4.5) * 0.5);

      float dist1 = length(uv - center1);
      float dist2 = length(uv - center2);
      float dist3 = length(uv - center3);
      float dist4 = length(uv - center4);
      float dist5 = length(uv - center5);
      float dist6 = length(uv - center6);

      float influence1 = 1.0 - smoothstep(0.0, gradientRadius, dist1);
      float influence2 = 1.0 - smoothstep(0.0, gradientRadius, dist2);
      float influence3 = 1.0 - smoothstep(0.0, gradientRadius, dist3);
      float influence4 = 1.0 - smoothstep(0.0, gradientRadius, dist4);
      float influence5 = 1.0 - smoothstep(0.0, gradientRadius, dist5);
      float influence6 = 1.0 - smoothstep(0.0, gradientRadius, dist6);

      float totalInfluence = (influence1 + influence2 + influence3 + influence4 + influence5 + influence6) / uGradientCount;

      // Touch Texture influence
      vec4 touch = texture2D(uTouchTexture, uv);
      float touchIntensity = touch.r * 0.5 + touch.g * 0.5;

      // Color mixing
      vec3 colorA = mix(uColor1, uColor2, sin(uTime * 0.5));
      vec3 colorB = mix(uColor3, uColor4, cos(uTime * 0.4));

      vec3 blendedColor = mix(uDarkNavy, colorA, uColor1Weight * (influence1 + influence3 + influence5));
      blendedColor = mix(blendedColor, colorB, uColor2Weight * (influence2 + influence4 + influence6));

      blendedColor = mix(blendedColor, uDarkNavy, 0.4);
      blendedColor += touchIntensity * 0.5;

      return blendedColor;
    }

    void main() {
      vec2 uv = vUv;

      uv = (uv - 0.5) / uZoom + 0.5;

      vec3 finalColor = getGradientColor(uv, uTime);

      // Add Film Grain
      float noise = grain(gl_FragCoord.xy / uResolution.xy, uTime);
      finalColor += noise * uGrainIntensity;

      gl_FragColor = vec4(finalColor, 1.0);
    }
  `;

const containerRef = ref(null); // #container 역할 (3D 공간)
const viewMode = ref("grid");
const projectsData = ref(projects); // 프로젝트 데이터
const hoveredProjectId = ref(null);

const n = projects.length;

const handleBoxMouseEnter = (e) => {
  gsap.to(e.currentTarget, {
    duration: 0.3,
    rotationX: -14,
    y: "-130%",
    ease: "back.out(6)",
  });
};
const handleBoxMouseLeave = (e) => {
  gsap.to(e.currentTarget, {
    duration: 0.4,
    rotationX: 0,
    y: "-50%",
  });
};

// ... 기존 변수 선언들 (n, projectsData 등)
const handleMouseMove = (e) => {
  // 주신 코드의 로직을 유지하되, 전체적인 회전 중심을 마우스에 따라 제어
  gsap.to(".box", {
    duration: 0.6,
    rotationY: (i) =>
      45 + (i / n) * 206.5 + 90 * (e.clientX / window.innerWidth),
  });
};

const initGSAPProjectList = (container) => {
  if (!container || n === 0) return;

  // 1. 컨테이너 원근감 설정 (주신 코드 수치 800)
  gsap.set(container, { perspective: 800 });

  projectsData.value.forEach((project, i) => {
    const b = document.createElement("div");
    b.classList.add("box");

    // 글자 반전을 해결하기 위해 card-content로 감쌉니다.
    b.innerHTML = `
      <div class="card-content">
        <div class="project-title">${project.name}</div>
        <div class="project-date">${project.date}</div>
      </div>
    `;

    // 2. 호버 이벤트 (주신 로직 그대로: 위로 튀어오르며 회전)
    b.onmouseenter = () => {
      gsap.to(b, {
        duration: 0.3,
        rotationX: -14,
        y: "-130%",
        ease: "back.out(6)",
      });
    };
    b.onmouseleave = () => {
      gsap.to(b, { duration: 0.4, rotationX: 0, y: "-50%" });
    };

    container.appendChild(b);

    // 3. 초기 위치 설정 (주신 수치 그대로)
    gsap.set(b, {
      left: "50%",
      top: "50%",
      x: "-50%",
      y: "-50%",
      z: 600,
      width: 300,
      height: 600,
      borderRadius: 20,
      background: `hsl(${(i / n) * 360}, 100%, 50%)`,
      position: "absolute",
    });

    // 4. 등장 애니메이션 (수정 포인트: transformOrigin)
    gsap.fromTo(
      b,
      {
        scaleY: 0,
        zIndex: i < n / 2 ? -i : i,
        rotationY: 90 + (i / n) * 206.5,
        // ⭐ 핵심: -1060%를 +1060%로 변경 (축이 앞으로 오면서 안으로 굽음)
        // 만약 카드가 너무 겹친다면 이 수치를 1500% 등으로 더 키우세요.
        transformOrigin: "50% 50% 1200%",
      },
      {
        scaleY: 1,
        duration: 1,
        delay: 1 - 0.5 * (i / n),
        ease: "elastic",
      }
    );
  });

  window.addEventListener("mousemove", handleMouseMove);
};
// ============================================
// TouchTexture Class (캔버스에 마우스 궤적을 그림)
// ============================================

class TouchTexture {
  constructor() {
    this.size = 64;
    this.width = this.height = this.size;
    this.maxAge = 64;
    this.radius = 0.16 * this.size;
    this.speed = 1 / this.maxAge;
    this.trail = [];
    this.last = null;
    this.initTexture();
  }

  initTexture() {
    this.canvas = document.createElement("canvas");
    this.canvas.width = this.width;
    this.canvas.height = this.height;
    this.ctx = this.canvas.getContext("2d");
    this.ctx.fillStyle = "black";
    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
    this.texture = new THREE.Texture(this.canvas);
  }

  update() {
    this.clear();
    let speed = this.speed;
    for (let i = this.trail.length - 1; i >= 0; i--) {
      const point = this.trail[i];
      let f = point.force * speed * (1 - point.age / this.maxAge);
      point.x += point.vx * f;
      point.y += point.vy * f;
      point.age++;
      if (point.age > this.maxAge) {
        this.trail.splice(i, 1);
      } else {
        this.drawPoint(point);
      }
    }
    this.texture.needsUpdate = true;
  }

  clear() {
    this.ctx.fillStyle = "black";
    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
  }

  addTouch(point) {
    let force = 0;
    let vx = 0;
    let vy = 0;
    const last = this.last;
    if (last) {
      const dx = point.x - last.x;
      const dy = point.y - last.y;
      if (dx === 0 && dy === 0) return;
      const dd = dx * dx + dy * dy;
      let d = Math.sqrt(dd);
      vx = dx / d;
      vy = dy / d;
      force = Math.min(dd * 20000, 2.0);
    }
    this.last = { x: point.x, y: point.y };
    this.trail.push({ x: point.x, y: point.y, age: 0, force, vx, vy });
  }

  drawPoint(point) {
    const pos = {
      x: point.x * this.width,
      y: (1 - point.y) * this.height,
    };

    let intensity = 1;
    if (point.age < this.maxAge * 0.3) {
      intensity = Math.sin((point.age / (this.maxAge * 0.3)) * (Math.PI / 2));
    } else {
      const t = 1 - (point.age - this.maxAge * 0.3) / (this.maxAge * 0.7);
      intensity = -t * (t - 2);
    }
    intensity *= point.force;

    const radius = this.radius;
    let color = `${((point.vx + 1) / 2) * 255}, ${
      ((point.vy + 1) / 2) * 255
    }, ${intensity * 255}`;

    let offset = this.size * 5;
    this.ctx.shadowOffsetX = offset;
    this.ctx.shadowOffsetY = offset;
    this.ctx.shadowBlur = radius * 1;
    this.ctx.shadowColor = `rgba(${color},${0.2 * intensity})`;

    this.ctx.beginPath();
    this.ctx.fillStyle = "rgba(255,0,0,1)";
    this.ctx.arc(pos.x - offset, pos.y - offset, radius, 0, Math.PI * 2);
    this.ctx.fill();
  }
}

// ----------------------------------------------------------------------

export default {
  name: "AboutPage",

  data() {
    return {
      texts: [
        { en: "User-Centric" },
        { en: "Pixel-Perfect" },
        { en: "Semantic" },
        { en: "Responsive" },
        { en: "Accessible" },
        { en: "Optimized" },
        { en: "Interactive" },
      ],
      index: 0,
      currentEnText: "",
      enIndex: 0,
      isDeleting: false,
      typingSpeed: 80,
      deletingSpeed: 70,
      delayAfterTyping: 2000,
      timer: null, // 타이머 추가

      rollingTls: [],
    };
  },

  methods: {
    // === 1. 타이핑 효과 메소드 (Options API) ===
    typeEn() {
      clearTimeout(this.timer);
      const currentIndex = this.index % this.texts.length;
      const currentFullText = this.texts[currentIndex].en;
      if (!this.isDeleting) {
        this.currentEnText = currentFullText.substring(0, this.enIndex + 1);
        this.enIndex++;
        if (this.enIndex >= currentFullText.length) {
          this.isDeleting = true;
          this.timer = setTimeout(this.typeEn, this.delayAfterTyping);
          return;
        }
        this.timer = setTimeout(this.typeEn, this.typingSpeed);
      } else {
        this.currentEnText = currentFullText.substring(0, this.enIndex - 1);
        this.enIndex--;
        if (this.enIndex <= 0) {
          this.isDeleting = false;
          this.index = (this.index + 1) % this.texts.length;
          this.timer = setTimeout(this.typeEn, this.typingSpeed);
          return;
        }
        this.timer = setTimeout(this.typeEn, this.deletingSpeed);
      }
    },
  },

  setup() {
    // ----------------------------------------------------------------------
    // Three.js 상태: shallowRef를 사용하여 반응성 프록시화 방지
    // ----------------------------------------------------------------------
    const touchTexture = shallowRef(null);
    const uniforms = shallowRef(null);
    const renderer = shallowRef(null);
    const scene = shallowRef(null);
    const camera = shallowRef(null);
    const animationFrameId = ref(null);
    const clock = new THREE.Clock(); // 일반 객체

    const { x: mouseX, y: mouseY } = useMouse();

    // === 1. 이벤트 핸들러 ===
    const onResize = () => {
      const width = window.innerWidth;
      const height = window.innerHeight;

      if (camera.value && renderer.value && uniforms.value) {
        camera.value.left = width / -2;
        camera.value.right = width / 2;
        camera.value.top = height / 2;
        camera.value.bottom = height / -2;
        camera.value.updateProjectionMatrix();

        renderer.value.setSize(width, height);
        uniforms.value.uResolution.value.set(width, height);
      }
    };

    const onMouseMove = (event) => {
      if (!touchTexture.value) return;

      const normalizedX = event.clientX / window.innerWidth;
      const normalizedY =
        (window.innerHeight - event.clientY) / window.innerHeight;

      touchTexture.value.addTouch({ x: normalizedX, y: normalizedY });
    };

    // === 2. 렌더링 루프 ===
    const animate = () => {
      const delta = clock.getDelta();
      if (uniforms.value && touchTexture.value) {
        // null 체크 추가
        uniforms.value.uTime.value += delta;
        touchTexture.value.update();
      }
      if (renderer.value && scene.value && camera.value) {
        // null 체크 추가
        renderer.value.render(scene.value, camera.value);
      }
      animationFrameId.value = requestAnimationFrame(animate);
    };

    // === 3. 초기화 ===
    const initThree = () => {
      const canvas = document.getElementById("BlobBg");
      if (!canvas) return;

      const width = window.innerWidth;
      const height = window.innerHeight;

      camera.value = new THREE.OrthographicCamera(
        width / -2,
        width / 2,
        height / 2,
        height / -2,
        1,
        1000
      );
      camera.value.position.z = 1;
      scene.value = new THREE.Scene();

      renderer.value = new THREE.WebGLRenderer({ canvas, antialias: true });
      renderer.value.setSize(width, height);
      renderer.value.setPixelRatio(window.devicePixelRatio);

      touchTexture.value = new TouchTexture();

      // uniforms에 할당
      const newBaseColor = new THREE.Vector3(0.33, 0.53, 0.96);

      const brightBlobColor = new THREE.Vector3(0.5, 0.7, 1.0);

      uniforms.value = {
        uTime: { value: 0 },
        uResolution: { value: new THREE.Vector2(width, height) },

        // ⭐ 1. 블롭의 밝은 색상 (밝은 톤 유지)
        uColor1: { value: brightBlobColor },
        uColor3: { value: brightBlobColor },
        uColor5: { value: brightBlobColor },

        // ⭐ 2. 블롭의 어두운 색상 (배경색과 유사하게 설정)
        uColor2: { value: newBaseColor },
        uColor4: { value: newBaseColor },
        uColor6: { value: newBaseColor },

        uSpeed: { value: 1.2 },
        uIntensity: { value: 1.8 },
        uTouchTexture: { value: touchTexture.value.texture },
        uGrainIntensity: { value: 0.02 },
        uZoom: { value: 1.0 },

        // ⭐ 3. 배경의 기본 어두운 색상 (가장 중요)
        uDarkNavy: { value: newBaseColor }, // #5486F5로 설정

        uGradientSize: { value: 0.5 },
        uGradientCount: { value: 4.0 },
        uColor1Weight: { value: 1.0 },
        uColor2Weight: { value: 1.0 },
      };

      const geometry = new THREE.PlaneGeometry(width, height, 1, 1);
      const material = new THREE.ShaderMaterial({
        uniforms: uniforms.value,
        vertexShader: vertexShader,
        fragmentShader: fragmentShader,
      });

      const mesh = new THREE.Mesh(geometry, material);
      scene.value.add(mesh);

      // 이벤트 리스너 등록
      window.addEventListener("resize", onResize);
      window.addEventListener("mousemove", onMouseMove);

      animate();
    };

    const initRollingText = () => {
      // .rolling-content 클래스를 가진 모든 요소를 선택
      const wrappers = document.querySelectorAll(".rolling-content");
      const tls = [];

      wrappers.forEach((el, idx) => {
        const isSecondLine = idx === 1;
        const width = el.offsetWidth / 2; // 전체 아이템의 절반 너비

        // 첫 번째 줄: 0 -> -width (왼쪽으로 이동)
        // 두 번째 줄: -width -> 0 (오른쪽으로 이동)
        const startX = isSecondLine ? -width : 0;
        const endX = isSecondLine ? 0 : -width;

        // 초기 위치 세팅
        gsap.set(el, { x: startX });

        const tl = gsap.to(el, {
          x: endX,
          duration: 35, // 속도가 너무 빠르면 30으로 늘리세요
          ease: "none",
          repeat: -1,
        });

        ScrollTrigger.create({
          trigger: ".rolling-section",
          start: "top bottom",
          end: "bottom top",
          onUpdate: (self) => {
            const velocity = Math.abs(self.getVelocity() / 150);
            const speed = 1 + velocity;
            gsap.to(tl, { timeScale: speed, duration: 0.3 });
            gsap.to(tl, { timeScale: 1, delay: 0.5, duration: 1 });
          },
        });

        tls.push(tl);
      });
      return tls;
    };

    // 템플릿 및 Options API에서 접근할 모든 상태와 함수를 반환합니다.
    return {
      mouseX,
      mouseY,
      // Options API 라이프사이클 훅에서 호출/정리하기 위해 반환
      initThree,
      onResize,
      onMouseMove,
      animate,

      touchTexture,
      uniforms,
      renderer,
      scene,
      camera,
      animationFrameId,
      clock,

      containerRef,
      initGSAPProjectList,
      handleMouseMove,

      // Options API에서 사용하지 않지만 정리 필요
      handleBoxMouseEnter,
      handleBoxMouseLeave,

      initRollingText,
    };
  },

  // ⭐ Options API 라이프사이클 훅: 타이핑 시작 및 Three.js 초기화/정리
  mounted() {
    const initBioReveal = () => {
      // 1. 모든 줄(.bio-row)을 찾습니다.
      const rows = document.querySelectorAll(
        ".bio-row, .row01, .row02, .row03"
      );

      rows.forEach((row) => {
        // 2. 해당 줄 안의 직접적인 자식들(video-box, span 등)을 선택합니다.
        const children = row.children;

        // 3. ⭐ 시작 전에 자식들을 미리 숨깁니다 (CSS 설정을 대신함)
        gsap.set(children, {
          opacity: 0,
          y: 50,
        });

        // 4. 애니메이션 실행
        gsap.to(children, {
          opacity: 1,
          y: 0,
          duration: 0.8,
          stagger: 0.2,
          ease: "back.out(1.7)",
          scrollTrigger: {
            trigger: row, // 부모인 row가 화면에 들어오면
            start: "top 85%", // 실행
            // markers: true,
            toggleActions: "play none none reverse",
          },
        });
      });
    };

    initBioReveal();

    // 1. 타이핑 시작 (methods에 정의됨)
    this.typeEn();

    // 2. Three.js 초기화 (setup에서 반환된 함수 호출)
    this.$nextTick(() => {
      if (this.initThree) {
        this.initThree();
      }
      if (this.containerRef && this.initGSAPProjectList) {
        // ref를 통해 DOM 요소 접근
        this.initGSAPProjectList(this.containerRef);
      }

      this.rollingTls = this.initRollingText();
    });

    const initIntroAnimation = () => {
      const panels = gsap.utils.toArray(".parallax__item");

      panels.forEach((panel, i) => {
        ScrollTrigger.create({
          trigger: panel,
          start: "top top",
          pin: true,
          pinSpacing: false, // 다음 섹션이 아래서 올라와 덮게 만듦
          scrub: true,
        });
      });

      const targets = document.querySelectorAll(".intro-section .split-text");
      if (targets.length === 0) return;

      targets.forEach((target) => {
        const content = target.innerHTML;
        target.innerHTML = "";
        const parts = content.split(/(<br\s*\/?>)/i);
        parts.forEach((part) => {
          if (part.toLowerCase().startsWith("<br")) {
            target.innerHTML += part;
          } else {
            [...part].forEach((char) => {
              const span = document.createElement("span");
              span.classList.add("char");
              span.innerText = char === " " ? "\u00A0" : char;
              span.setAttribute("data-char", char);
              target.appendChild(span);
            });
          }
        });
      });

      const allChars = document.querySelectorAll(".intro-section .char");

      const enChars = document.querySelectorAll(".en-text .char");
      const krText = document.querySelector(".kr-text");

      const tl = gsap.timeline({
        scrollTrigger: {
          trigger: ".intro-section",
          start: "top top",
          end: "+=2000",
          pin: true,
          scrub: 1,
          anticipatePin: 1,
        },
      });

      // STEP 1: 영문 글자가 한 글자씩 진해짐 (왼쪽->오른쪽 진행)
      tl.to(enChars, {
        color: "#fff",
        opacity: 1, // 투명도도 함께 조절 가능
        stagger: 0.1, // 글자 간의 간격
        ease: "none",
      });

      // STEP 2: 국문 텍스트 등장
      tl.to(
        krText,
        {
          opacity: 1,
          y: 0,
          duration: 0.5,
          ease: "power2.out",
        },
        "+=0.1"
      );
    };

    initIntroAnimation();

    const initHorizontalScroll = () => {
      const horiSection = document.querySelector(".horizontal-section");
      const horiInner = horiSection.querySelector(".horizontal-inner");
      const horiTitle = horiSection.querySelector(".sub-title");

      // 1. 전체 가로 스크롤 애니메이션 (기준점)
      const scrollTween = gsap.to(horiInner, {
        x: () => -(horiInner.scrollWidth - window.innerWidth),
        ease: "none",
        scrollTrigger: {
          trigger: horiSection,
          start: "top top",
          end: () => `+=${horiInner.scrollWidth}`,
          pin: true,
          scrub: 1,
          invalidateOnRefresh: true,
        },
      });

      // 2. 어두운 배경을 가진 모든 섹션을 찾아서 각각 트리거를 걸어줍니다.
      // .focus-section 외에도 어두운 섹션에 .is-dark-bg 라는 클래스를 붙여두면 관리하기 편합니다.
      const darkSections = horiSection.querySelectorAll(
        ".focus-section, .is-dark-bg"
      );

      darkSections.forEach((darkSection) => {
        ScrollTrigger.create({
          trigger: darkSection,
          containerAnimation: scrollTween, // 가로 스크롤 애니메이션과 동기화하는 핵심 옵션!
          start: "left 50px", // 섹션의 왼쪽이 타이틀 위치(약 50px)에 닿을 때
          // end: "right 50px", // 섹션의 오른쪽이 타이틀 위치를 벗어날 때
          onEnter: () => horiTitle.classList.add("is-dark-mode"),
          onLeave: () => horiTitle.classList.remove("is-dark-mode"),
          // onEnterBack: () => horiTitle.classList.add("is-dark-mode"),
          onLeaveBack: () => horiTitle.classList.remove("is-dark-mode"),
        });
      });
    };
    initHorizontalScroll();

    const initIdentityAnimation = (scrollTween) => {
      const identitySec = document.querySelector(".identity-section");
      if (!identitySec) return;

      const profileImg = identitySec.querySelector(".profile-img");
      const titleTexts = identitySec.querySelectorAll(
        ".title-wrap h2, .title-wrap p"
      );
      const svgTarget = identitySec.querySelector(".scrolling-svg-text svg");

      // 초기 상태 설정
      gsap.set(profileImg, { opacity: 0, x: -50 });
      gsap.set(titleTexts, { opacity: 0, y: 20 });
      if (svgTarget) {
        gsap.set(svgTarget, {
          opacity: 1,
          clipPath: "inset(0% 100% 0% 0%)",
        });
      }

      const tl = gsap.timeline({
        scrollTrigger: {
          trigger: identitySec,
          containerAnimation: scrollTween,
          // ★ 이 부분이 핵심입니다: 섹션의 왼쪽이 화면의 50% 위치에 오면 시작
          start: "left 50%",
          // 종료 지점을 더 뒤로 미뤄서(예: 0% 또는 마이너스) 전체 호흡을 길게 가져갑니다
          end: "right 20%",
          scrub: 2,
        },
      });

      tl.to(profileImg, {
        opacity: 1,
        x: 0,
        duration: 1.5,
      })
        .to(
          titleTexts,
          {
            opacity: 1,
            y: 0,
            stagger: 0.3,
            duration: 1,
          },
          "-=0.8"
        )
        .to(
          svgTarget,
          {
            clipPath: "inset(0% 0% 0% 0%)",
            ease: "none",
            duration: 4,
          },
          "+=0.2"
        );
    };

    initIdentityAnimation();

    const initFocusThree = (scrollTween) => {
      const container = document.getElementById("three-container");
      if (!container) return;

      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(
        50,
        container.clientWidth / container.clientHeight,
        0.1,
        10
      );
      camera.position.z = 3;

      const renderer = new THREE.WebGLRenderer({
        antialias: true,
        alpha: true,
      });
      renderer.setSize(container.clientWidth, container.clientHeight);
      renderer.setPixelRatio(window.devicePixelRatio);
      container.appendChild(renderer.domElement);

      // --- 1. 조명 (피그마 효과는 조명이 부드러워야 합니다) ---
      const ambientLight = new THREE.AmbientLight(0xffffff, 1.0);
      scene.add(ambientLight);

      const topLight = new THREE.PointLight(0xffffff, 1.5);
      topLight.position.set(2, 5, 2);
      scene.add(topLight);

      // --- 2. 텍스처 (검정색 글자 유지) ---
      const createTextTexture = (text) => {
        const canvas = document.createElement("canvas");
        const context = canvas.getContext("2d");
        const size = 1024;
        canvas.width = size;
        canvas.height = size;
        context.clearRect(0, 0, size, size);

        context.fillStyle = "#fff"; // 피그마 텍스트처럼 선명한 다크 그레이
        context.font = "Bold 140px sans-serif";
        context.textAlign = "center";
        context.textBaseline = "middle";
        context.fillText(text, size / 2, size / 2);

        const texture = new THREE.CanvasTexture(canvas);
        texture.colorSpace = THREE.SRGBColorSpace;
        texture.anisotropy = 8;
        return texture;
      };

      // --- 3. 피그마 글래스 재질 (핵심 셋팅) ---
      const labels = ["Focus", "Logic", "Clean", "Speed", "Refactor", "Strong"];
      const materials = labels.map(
        (text) =>
          new THREE.MeshPhysicalMaterial({
            map: createTextTexture(text),
            color: 0xffffff,

            // 피그마의 배경 흐림(Background Blur) 효과 구현
            transmission: 0.95, // 빛 투과율 (높을수록 맑음)
            roughness: 0.15, // 뽀얀 느낌 (피그마의 Blur 강도)
            thickness: 1.0, // 유리 두께감
            ior: 1.45, // 굴절률 (피그마 스타일은 1.4~1.5가 적당)

            transparent: true,
            opacity: 1, // transmission을 쓸 때는 1로 두는 것이 유리 질감이 삼

            clearcoat: 0.5, // 표면 광택 (살짝만)
            metalness: 0.05, // 아주 살짝의 반사광
            reflectivity: 0.5,
          })
      );

      const geometry = new RoundedBoxGeometry(1.2, 1.2, 1.2, 10, 0.15);
      const mesh = new THREE.Mesh(geometry, materials);
      scene.add(mesh);

      // --- 4. 테두리 (피그마의 Stroke 효과) ---
      const edges = new THREE.EdgesGeometry(geometry);
      const line = new THREE.LineSegments(
        edges,
        new THREE.LineBasicMaterial({
          color: 0xffffff,
          transparent: true,
          opacity: 0.4, // 피그마 스트로크처럼 약간 선명하게
        })
      );
      mesh.add(line);

      // --- 5. 마우스 및 렌더 (기존 로직 유지) ---
      let mouseX = 0,
        mouseY = 0,
        targetX = 0,
        targetY = 0;
      window.addEventListener("mousemove", (e) => {
        targetX = (e.clientX / window.innerWidth) * 2 - 1;
        targetY = -(e.clientY / window.innerHeight) * 2 + 1;
      });

      const controls = new OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.enableZoom = false;

      const animate = () => {
        requestAnimationFrame(animate);
        mouseX += (targetX - mouseX) * 0.05;
        mouseY += (targetY - mouseY) * 0.05;
        mesh.rotation.y += 0.005 + mouseX * 0.02;
        mesh.rotation.x += 0.003 + mouseY * 0.02;
        controls.update();
        renderer.render(scene, camera);
      };
      animate();

      if (scrollTween) {
        gsap.to(mesh.rotation, {
          y: Math.PI * 4,
          scrollTrigger: {
            trigger: ".focus-section",
            containerAnimation: scrollTween,
            start: "left 50%",
            end: "right 20%",
            scrub: 2,
          },
        });
      }

      window.addEventListener("resize", () => {
        camera.aspect = container.clientWidth / container.clientHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(container.clientWidth, container.clientHeight);
      });
    };

    initFocusThree();

    const initWorkflowMask = () => {
      const section = document.querySelector(".workflow-section");
      const hiddenContent = section.querySelector(".hidden-content");
      const tags = section.querySelectorAll(".base-content .tag");

      if (!section || !hiddenContent) return;

      // 1. quickTo 설정 (반응 속도 조절)
      // duration이 너무 길면 마우스를 못 따라오니 0.1~0.2 정도로 짧게 잡습니다.
      const xTo = gsap.quickTo(hiddenContent, "--x", {
        duration: 0.15,
        ease: "none",
      });
      const yTo = gsap.quickTo(hiddenContent, "--y", {
        duration: 0.15,
        ease: "none",
      });

      // 2. 좌표 업데이트 함수 (섹션 내 어디서든 마우스 이동 감지)
      const updateMaskPos = (e) => {
        const rect = section.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        xTo(x);
        yTo(y);
      };

      // 섹션 위에서 마우스가 움직이는 동안 계속 좌표를 쏴줍니다.
      section.addEventListener("mousemove", updateMaskPos);

      // 3. 태그 호버 시 크기만 조절
      tags.forEach((tag) => {
        tag.addEventListener("mouseenter", () => {
          gsap.to(hiddenContent, {
            "--size": "150px", // 마스크 나타남
            duration: 0.4,
            ease: "power2.out",
          });
        });

        tag.addEventListener("mouseleave", () => {
          gsap.to(hiddenContent, {
            "--size": "0px", // 마스크 사라짐
            duration: 0.3,
            ease: "power2.in",
          });
        });
      });
    };

    initWorkflowMask();
  },

  beforeUnmount() {
    // 타이핑 타이머 정리
    clearTimeout(this.timer);

    // Three.js 정리 (setup에서 반환된 상태에 접근)
    if (this.animationFrameId.value) {
      cancelAnimationFrame(this.animationFrameId.value);
    }
    // setup에서 정의된 이벤트 리스너 함수를 제거
    window.removeEventListener("resize", this.onResize);
    window.removeEventListener("mousemove", this.onMouseMove);

    if (this.renderer.value) {
      this.renderer.value.dispose();
    }
    if (this.touchTexture.value) {
      this.touchTexture.value.texture.dispose();
      this.touchTexture.value.canvas = null;
    }

    window.removeEventListener("mousemove", this.handleMouseMove);

    // 생성된 .box 요소들의 이벤트 리스너 정리 (선택 사항이지만 안전함)
    const boxes = document.querySelectorAll(".box");
    boxes.forEach((b) => {
      b.removeEventListener("mouseenter", this.handleBoxMouseEnter);
      b.removeEventListener("mouseleave", this.handleBoxMouseLeave);
    });

    ScrollTrigger.getAll().forEach((t) => t.kill());
    this.rollingTls.forEach((tl) => tl.kill());
  },
};
</script>
