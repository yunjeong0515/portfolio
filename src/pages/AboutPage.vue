<template>
  <q-page class="aboutpage-container">
    <section class="visual-section">
      <div class="gradient-overlay"></div>
      <canvas id="BlobBg"></canvas>
      <div class="wrapper">
        <div class="contents-wrap">
          <div class="title-wrap">
            <div class="keyworld-wrap">
              <span class="bracket font_ibm font_500">&lt;/</span>
              <span class="typing-text font_ibm font_500">{{
                currentEnText
              }}</span>
              <span class="bracket font_ibm font_500">&gt;</span>
            </div>
            <span class="stac-text font_ibm">Publisher</span>
          </div>
          <div class="intro-text">
            <span>ì•ˆë…•í•˜ì„¸ìš”! ìµœì ì˜ ë””ì§€í„¸ ê²½í—˜ì„ ì„¤ê³„í•˜ëŠ” </span>
            <span>í¼ë¸”ë¦¬ì…”, ì´ìœ¤ì •ì…ë‹ˆë‹¤.</span>
          </div>
          <div class="scroll-icon">
            <span class="font_ibm">SCROLL</span>
            <div class="icon">
              <img src="../assets/imgs/icon/arrow_down_b9.svg" alt="" />
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="profile-section">
      <div class="wrapper">
        <div class="title">
          <h2 class="font_ibm">
            ê¸°íšì„ ë””ìì¸í•˜ê³  <br class="m-br" />ì½”ë“œë¡œ ì™„ì„±í•˜ëŠ”, <br />
            ë””ìì¸í•˜ëŠ” í¼ë¸”ë¦¬ì…” ì´ìœ¤ì •ì…ë‹ˆë‹¤.
          </h2>
          <div class="profile-img">
            <img
              src="../assets/imgs/about/profile_img01.png"
              alt="ì´ìœ¤ì • í”„ë¡œí•„ ì‚¬ì§„"
            />
          </div>
        </div>
        <div class="content-wrap">
          <div class="info-area">
            <div class="sub-section personal">
              <h3 class="font_mon font_700">
                {{ profileData.personal.title }}
              </h3>
              <ul class="info-list">
                <li
                  v-for="item in profileData.personal.items"
                  :key="item.label"
                  class="item"
                >
                  <dt class="font_mon font_600 label">{{ item.label }}</dt>
                  <dd class="font_ibm value">{{ item.value }}</dd>
                </li>
              </ul>
            </div>

            <div class="sub-section experience">
              <h3 class="font_mon font_700">Experience</h3>
              <ul class="info-list">
                <li v-for="exp in profileData.experience" :key="exp.date">
                  <span class="date font_mon">{{ exp.date }}</span>
                  <span class="text font_ibm">{{ exp.text }}</span>
                </li>
              </ul>
            </div>

            <div class="sub-section education">
              <h3 class="font_mon font_700">Education</h3>
              <ul class="info-list">
                <li v-for="edu in profileData.education" :key="edu.date">
                  <span class="date font_mon">{{ edu.date }}</span>
                  <span class="text font_ibm">{{ edu.text }}</span>
                </li>
              </ul>
            </div>

            <div class="sub-section activities">
              <h3 class="font_mon font_700">Campus Activities</h3>
              <ul class="info-list">
                <li v-for="act in profileData.activities" :key="act.date">
                  <span class="date font_mon">{{ act.date }}</span>
                  <span class="text font_ibm">{{ act.text }}</span>
                </li>
              </ul>
            </div>

            <div class="sub-section license">
              <h3 class="font_mon font_700">License</h3>
              <ul class="info-list">
                <li v-for="license in profileData.licenses" :key="license.date">
                  <span class="date font_mon">{{ license.date }}</span>
                  <span class="text font_ibm">{{ license.text }}</span>
                </li>
              </ul>
            </div>

            <div class="sub-section skills">
              <h3 class="font_mon font_700">Skills</h3>
              <div class="skills-wrap">
                <span
                  v-for="skill in profileData.skills"
                  :key="skill"
                  class="skill-item font_mon"
                >
                  {{ skill }}
                </span>
              </div>
            </div>
          </div>

          <div class="profile-img">
            <img
              src="../assets/imgs/about/profile_img01.png"
              alt="ì´ìœ¤ì • í”„ë¡œí•„ ì‚¬ì§„"
            />
          </div>
        </div>
      </div>
    </section>
    <section class="rolling-section">
      <div class="rolling-wrapper">
        <div class="rolling-content">
          <div class="rolling-item" v-for="n in 10" :key="'name-' + n">
            <span class="font_mon font_300">LEE YUNJEONG</span>
            <div class="circle-icon">
              <div class="dev-icon">
                <svg width="105" height="58" viewBox="0 0 105 58" fill="none">
                  <path
                    d="M77.2891 41.3765L98.6214 29.5825V29.0669L77.2891 17.3374V10.4414L105.002 25.9734V32.676L77.2891 48.208V41.3765Z"
                    fill="white"
                  />
                  <path
                    d="M38.5156 57.8744L60.2346 0H66.4861L44.7671 57.8744H38.5156Z"
                    fill="white"
                  />
                  <path
                    d="M0 32.676V25.9734L27.7127 10.4414V17.2729L6.38036 29.0669V29.5825L27.7127 41.312V48.208L0 32.676Z"
                    fill="white"
                  />
                </svg>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="rolling-wrapper">
        <div class="rolling-content">
          <div class="rolling-item" v-for="n in 10" :key="'job-' + n">
            <span class="font_mon font_300">PUBLISHER</span>
            <div class="rolling-icon">
              <img src="../assets/imgs/about/mac_3d_icon.png" alt="mac" />
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="bio-section parallax__item">
      <div class="wrapper">
        <div class="bio-content-wrap">
          <div class="bio-row row01">
            <div class="video-box">
              <video
                autoplay
                muted
                loop
                playsinline
                src="../assets/video/bio03.mp4"
              ></video>
            </div>
            <span class="bio-text font_ibm">I'm Yunjeong Lee!</span>
          </div>
          <div class="bio-row row02">
            <span class="bio-text font_ibm font_400">A Web Publisher </span>
            <div class="video-box">
              <video
                autoplay
                muted
                loop
                playsinline
                src="../assets/video/bio02.mp4"
              ></video>
            </div>
          </div>
          <div class="bio-row row03">
            <span class="bio-text font_ibm font_400"
              >delivering optimal <br class="m-br" />digital experiences.</span
            >
          </div>
          <div class="bio-row row04">
            <span class="bio-text font_ibm font_400">Defining the web</span>
            <div class="video-box">
              <video
                autoplay
                muted
                loop
                playsinline
                src="../assets/video/bio03.mp4"
              ></video>
            </div>
            <span class="bio-text font_ibm font_400">since July 2024.</span>
          </div>
        </div>
      </div>
    </section>
    <section class="intro-section" ref="introSection">
      <div class="pin-wrapper">
        <div class="wrapper">
          <div class="title-wrap">
            <span class="sub-title font_ibm">What started it?</span>
            <h2 class="split-text font_ibm en-text font_400">
              Curiosity about how <br class="m-br" />design is implemented
              <br />on the web led me <br class="m-br" />to start my career
              <br />as a publisher.
            </h2>
            <p class="kr-text font_ibm font_400">
              ë””ìì¸ì´ ì›¹ì‚¬ì´íŠ¸ì—ì„œ êµ¬í˜„ë˜ëŠ” ê³¼ì •ì— ëŒ€í•œ í˜¸ê¸°ì‹¬ìœ¼ë¡œ í¼ë¸”ë¦¬ì…”ì˜
              ê¸¸ì„ ì‹œì‘í–ˆìŠµë‹ˆë‹¤.
            </p>
          </div>
        </div>
      </div>
    </section>
    <section class="horizontal-section" ref="horizontalSection">
      <div class="pin-wrapper">
        <div class="horizontal-inner" ref="horizontalInner">
          <div class="identity-section one-page">
            <div class="wrapper">
              <div class="contents-inner">
                <div class="text-area">
                  <div class="title-wrap">
                    <h2 class="font_ibm font_400">&lt;Identity/&gt;</h2>
                    <p class="font_400">
                      ë‹¨ìˆœíˆ ë³´ì´ëŠ” í™”ë©´ì„ ë§Œë“œëŠ” ê²ƒì´ ì•„ë‹ˆë¼, <br />ì‹œê°„ì´
                      ì§€ë‚˜ë„ ìœ ì§€ë˜ê³  í™•ì¥ë  ìˆ˜ ìˆëŠ” ì½”ë“œë¥¼ ê³ ë¯¼í•©ë‹ˆë‹¤.
                    </p>
                  </div>
                  <div class="icon-list">
                    <div class="icon-item">
                      <img
                        src="../assets/imgs/about/identity01.png"
                        alt="ì•„ì´ì½˜1"
                      />
                    </div>
                    <div class="icon-item">
                      <img
                        src="../assets/imgs/about/identity02.png"
                        alt="ì•„ì´ì½˜2"
                      />
                    </div>
                    <div class="icon-item">
                      <img
                        src="../assets/imgs/about/identity03.png"
                        alt="ì•„ì´ì½˜3"
                      />
                    </div>
                    <div class="icon-item">
                      <img
                        src="../assets/imgs/about/identity04.png"
                        alt="ì•„ì´ì½˜4"
                      />
                    </div>
                  </div>
                  <!-- <div class="scrolling-svg-text">
                    <svg
                      viewBox="0 0 1000 200"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        id="wavePath"
                        d="M0,100 C150,200 350,0 500,100 C650,200 850,0 1000,100"
                        fill="transparent"
                      />

                      <text>
                        <textPath href="#wavePath" startOffset="0%">
                          not just visual, but sustainable
                        </textPath>
                      </text>
                    </svg>
                  </div> -->
                </div>
              </div>
            </div>
          </div>
          <div class="focus-section one-page">
            <div class="inner">
              <div class="title-wrap reveal-text">
                <h2 class="font_ibm font_400">&lt;Focus/&gt;</h2>
                <p class="font_500">
                  ìœ ì§€ë³´ìˆ˜ë¥¼ ì „ì œë¡œ ë§ˆí¬ì—…í•©ë‹ˆë‹¤.<br />
                  ë°˜ë³µì„ ì¤„ì´ê³ , ìˆ˜ì •ì— ê°•í•œ êµ¬ì¡°ë¥¼ ì„ í˜¸í•©ë‹ˆë‹¤.
                </p>
              </div>
              <div class="fluid-container planet-sphere">
                <div class="stage">
                  <div class="txt" ref="focusTxt">FOCUS ON EXPERIENCE</div>
                  <div class="grain"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="workflow-section one-page is-dark-bg">
            <div class="content-wrap">
              <div class="inner">
                <div class="title-wrap reveal-text">
                  <h2 class="font_ibm">&lt;Workflow/&gt;</h2>
                  <p>
                    ë””ìì¸ ì˜ë„ë¥¼ ì´í•´í•˜ê³  <br />êµ¬ì¡°ë¥¼ í•´ì„í•´ ì›¹ ìœ„ì—
                    êµ¬í˜„í•©ë‹ˆë‹¤.
                  </p>
                </div>
                <div class="workflow-tags">
                  <span class="tag font_mon font_700">DESIGN</span>
                  <span class="tag font_mon font_700">CODE</span>
                  <span class="tag font_mon font_700">EXPERIENCE</span>
                </div>
              </div>
            </div>
          </div>
          <div class="experience-section one-page is-dark-bg">
            <div class="content-wrap">
              <div class="inner">
                <div class="title-wrap reveal-text">
                  <h2 class="font_ibm">&lt;Experience/&gt;</h2>
                  <p>
                    ì‹¤ì œ ì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì½”ë“œë¥¼ ë§Œë“¤ì–´ì™”ìŠµë‹ˆë‹¤.<br />
                    ë””ìì´ë„ˆ, í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìì™€ í˜‘ì—…í•˜ë©° <br />
                    ìš´ì˜Â·ìœ ì§€ë³´ìˆ˜Â·ê°œì„ ê¹Œì§€ ì´ì–´ì§€ëŠ” ì‘ì—…ì„ ê²½í—˜í•´ì™”ìŠµë‹ˆë‹¤.
                  </p>
                </div>
                <div class="img-wrap">
                  <div class="code-greeting">
                    <span class="font_ibm font_500">&gt; Hello,</span>
                    <span class="font_ibm font_500">world !</span>
                  </div>
                  <div class="code-symbol">
                    <span class="font_ibm">&lt;/&gt;</span>
                  </div>
                  <div class="macbook-img">
                    <img src="../assets/imgs/about/macbook.png" alt="" />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="skills-section" ref="skillsSection">
      <div class="fixed-area">
        <h2 class="section-title font_ibm">&lt;/Skills&gt;</h2>
        <span class="bg-title font_ibm font_500" ref="bgTitle"></span>
      </div>
      <div class="wrapper">
        <div class="skill-card" data-title="HTML">
          <div class="skill-info">
            <div class="title-wrap">
              <h3 class="font_ibm font_500">HTML</h3>
              <span class="font_ibm">The Semantic Structure</span>
            </div>
            <p>
              ë‹¨ìˆœíˆ í™”ë©´ì— í…ìŠ¤íŠ¸ë¥¼ ë³´ì´ê²Œ í•˜ëŠ” ê²ƒì„ ë„˜ì–´, ì‹œë§¨í‹±
              ë§ˆí¬ì—…(Semantic Markup) ì›ì¹™ì„ ì² ì €íˆ ì§€ì¼œ ê²€ìƒ‰ ì—”ì§„ ìµœì í™”(SEO)ì™€
              ì›¹ ì ‘ê·¼ì„±ì˜ ê¸°ì´ˆë¥¼ ë‹¨ë‹¨í•˜ê²Œ ë‹¤ì§€ëŠ” ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
            </p>
          </div>
        </div>
        <div class="skill-card" data-title="CSS">
          <div class="skill-info">
            <div class="title-wrap">
              <h3 class="font_ibm font_500">CSS</h3>
              <span class="font_ibm"
                >Pixel-Perfect Styling & Responsive UX</span
              >
            </div>
            <p>
              ë””ìì¸ ì‹œìŠ¤í…œì„ í”½ì…€ ë‹¨ìœ„ë¡œ ì •í™•í•˜ê²Œ êµ¬í˜„í•©ë‹ˆë‹¤. @media ì¿¼ë¦¬ì™€
              Flexbox/Gridë¥¼ í™œìš©í•˜ì—¬ ëª¨ë“  ë””ë°”ì´ìŠ¤ì— ìµœì í™”ëœ ë°˜ì‘í˜• ì‚¬ìš©ì
              ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.
            </p>
          </div>
        </div>

        <div class="skill-card" data-title="JavaScript">
          <div class="skill-info">
            <div class="title-wrap">
              <h3 class="font_ibm font_500">JavaScript</h3>
              <span class="font_ibm"
                >Dynamic Interaction & Problem Solving</span
              >
            </div>
            <p>
              ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚¤ëŠ” ë™ì ì¸ ì¸í„°ë™ì…˜ì„ êµ¬í˜„í•©ë‹ˆë‹¤. ìˆœìˆ˜
              JavaScriptë¥¼ ì´ìš©í•´ ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³ ,
              ë°œìƒí•˜ëŠ” ë¬¸ì œë¥¼ ëŠ¥ë™ì ìœ¼ë¡œ í•´ê²°í•©ë‹ˆë‹¤.
            </p>
          </div>
        </div>

        <div class="skill-card" data-title="jQuery">
          <div class="skill-info">
            <div class="title-wrap">
              <h3 class="font_ibm font_500">jQuery</h3>
              <span class="font_ibm"
                >Efficient DOM Control & Cross-Browser Stability</span
              >
            </div>
            <p>
              ê°„ê²°í•œ ë¬¸ë²•ì„ í™œìš©í•˜ì—¬ DOM ì¡°ì‘ ë° ì• ë‹ˆë©”ì´ì…˜ì„ íš¨ìœ¨ì ìœ¼ë¡œ
              êµ¬í˜„í•©ë‹ˆë‹¤. ë³µì¡í•œ í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì§• ì´ìŠˆë¥¼ ìµœì†Œí™”í•˜ë©°, ë¹ ë¥´ê³ 
              ì•ˆì •ì ì¸ ì›¹ ì¸í„°ë™ì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.
            </p>
          </div>
        </div>

        <div class="skill-card" data-title="Vue.js">
          <div class="skill-info">
            <div class="title-wrap">
              <h3 class="font_ibm font_500">Vue.js</h3>
              <span class="font_ibm"
                >Component-Driven Architecture & Reactive UI</span
              >
            </div>
            <p>
              Quasar Frameworkë¥¼ í™œìš©í•˜ì—¬ ì›¹, ëª¨ë°”ì¼(í•˜ì´ë¸Œë¦¬ë“œ ì•±), ë°ìŠ¤í¬í†±
              í™˜ê²½ì— ëŒ€ì‘í•˜ëŠ” í†µí•©ì ì¸ UIë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤. Material Design ê¸°ë°˜ì˜
              ì»´í¬ë„ŒíŠ¸ë¡œ ì¼ê´€ì„± ìˆëŠ” ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.
            </p>
          </div>
        </div>
      </div>
    </section>
    <section class="project-section">
      <div class="project-header">
        <span class="sub-title font_ibm">SELECTED</span>
        <h2 class="main-title font_mon">PROJECT</h2>
      </div>

      <div class="swiper project-swiper">
        <div class="swiper-wrapper">
          <div class="swiper-slide project-item">
            <div class="thumb">
              <img
                src="../../src/assets/imgs/projects/herue/thumb01.jpg"
                alt=""
              />
            </div>
          </div>
          <div class="swiper-slide project-item">
            <div class="thumb">
              <img
                src="../../src/assets/imgs/projects/kmusical/thumb01.jpg"
                alt=""
              />
            </div>
          </div>
          <div class="swiper-slide project-item">
            <div class="thumb">
              <img
                src="../../src/assets/imgs/projects/hanwhalife/thumb01.jpg"
                alt=""
              />
            </div>
          </div>
          <div class="swiper-slide project-item">
            <div class="thumb">
              <img
                src="../../src/assets/imgs/projects/seoul80/thumb01.jpg"
                alt=""
              />
            </div>
          </div>
          <div class="swiper-slide project-item">
            <div class="thumb">
              <img
                src="../../src/assets/imgs/projects/rebound/thumb01.jpg"
                alt=""
              />
            </div>
          </div>
          <div class="swiper-slide project-item">
            <div class="thumb">
              <img src="../../src/assets/imgs/projects/pi/thumb01.jpg" alt="" />
            </div>
          </div>
          <div class="swiper-slide project-item">
            <div class="thumb">
              <img
                src="../../src/assets/imgs/projects/louche9/thumb01.jpg"
                alt=""
              />
            </div>
          </div>
        </div>
      </div>
      <div class="more-btn-wrap">
        <router-link to="/projects" class="more-btn font_ibm">
          MORE THE PROJECT
        </router-link>
      </div>
    </section>
    <section class="vision-section" ref="sectionRef">
      <div class="wrapper">
        <div class="canvas-inner">
          <div class="physics-canvas" ref="canvasContainer"></div>
          <div class="contents-wrap">
            <span class="title font_ibm">&lt;Vision/&gt;</span>
            <div class="text-wrap">
              <span class="main-text font_mon font_700">CREATIVE CODE</span>
              <div class="sub-text">
                <span>ê¹”ë”í•˜ê³  êµ¬ì¡°í™”ëœ ì½”ë“œë¥¼ ì‘ì„±í•˜ì—¬ </span>
                <span class="row02"
                  >ë””ìì¸ê³¼ ê¸°ëŠ¥ì„ ì•ˆì •ì ìœ¼ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.</span
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </q-page>
</template>

<script>
// â­ useMouseëŠ” @vueuse/coreì—ì„œ, ë‚˜ë¨¸ì§€ëŠ” vue ìì²´ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.
import { useMouse } from "@vueuse/core";
import { shallowRef, ref } from "vue";
import * as THREE from "three";
import * as Matter from "matter-js";
import { RoundedBoxGeometry } from "three/addons/geometries/RoundedBoxGeometry.js";
import { OrbitControls } from "three/addons/controls/OrbitControls.js";
import { gsap } from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";
// ì™¸ë¶€ë¡œ ë¶„ë¦¬í•œ Three.js ë¡œì§ ì„í¬íŠ¸
import { initBlobBackground } from "src/assets/js/visualEffects";
import Swiper from "swiper";
import { EffectCoverflow, Pagination, Autoplay } from "swiper/modules";
import "swiper/css";
import "swiper/css/effect-coverflow";
import "swiper/css/pagination";

gsap.registerPlugin(ScrollTrigger);

export default {
  name: "AboutPage",

  data() {
    return {
      texts: [
        { en: "User-Centric" },
        { en: "Semantic" },
        { en: "Responsive" },
        { en: "Accessible" },
        { en: "Optimized" },
        { en: "Interactive" },
      ],
      index: 0,
      currentEnText: "",
      enIndex: 0,
      isDeleting: false,
      typingSpeed: 80,
      deletingSpeed: 70,
      delayAfterTyping: 2000,
      timer: null,
      rollingTls: [],
      horizontalScrollTween: null,
      visionInstance: null,
      handleResize: null,
      profileData: {
        personal: {
          title: "Personal Information",
          items: [
            { label: "Name", value: "ì´ìœ¤ì •" },
            { label: "Birth", value: "1998.05.15" },
            { label: "Tel", value: "010-2717-5354" },
            { label: "Email", value: "dbswjd2825@naver.com" },
          ],
        },
        experience: [
          { date: "2024.07 ~", text: "(ì£¼)í¬ë ˆë”§ ì›¹í¼ë¸”ë¦¬ì…”" },
          { date: "2021.10 - 2023.10", text: "ì˜ë£Œë²•ì¸í˜œì›ì˜ë£Œì¬ë‹¨ ì‚¬ë¬´" },
        ],
        education: [
          {
            date: "2023.12 - 2024.04",
            text: "ì´ì§€ë””ìì¸ì»´í“¨í„°í•™ì› êµìœ¡\n[ì›¹ë””ìì¸&ì›¹í¼ë¸”ë¦¬ì‹± UI/UX ì½˜í…ì¸ ê°œë°œ]",
          },
          { date: "2017.03 - 2021.02", text: "ì²­ì£¼ëŒ€í•™êµ ì˜ë£Œê²½ì˜í•™ê³¼ ì „ê³µ" },
          { date: "2014.03 - 2017.02", text: "ì¶©ë¶ì—¬ìê³ ë“±í•™êµ" },
        ],
        activities: [
          { date: "2019.03 - 2020.02", text: "ì²­ì£¼ëŒ€í•™êµ ì´í•™ìƒíšŒ í™ë³´ë¶€ì¥" },
          {
            date: "2018.03 - 2019.02",
            text: "ì²­ì£¼ëŒ€í•™êµ ë™ì•„ë¦¬ì—°í•©íšŒ í™ë³´ì°¨ì¥",
          },
        ],
        licenses: [
          { date: "2024.04", text: "ì›¹ë””ìì¸ê¸°ëŠ¥ì‚¬" },
          { date: "2024.02", text: "GTQê·¸ë˜í”½ê¸°ìˆ ìê²© 1ê¸‰" },
          { date: "2021.07", text: "ìš´ì „ë©´í—ˆ 2ì¢… ë³´í†µ" },
          { date: "2021.03", text: "ë³´ê±´ì˜ë£Œì •ë³´ê´€ë¦¬ì‚¬" },
          { date: "2020.11", text: "ì‚¬íšŒì¡°ì‚¬ë¶„ì„ì‚¬(2ê¸‰)" },
        ],
        skills: [
          "html5",
          "css",
          "JavaScript",
          "Vue.js",
          "SCSS",
          "GSAP",
          "Figma",
          "XD",
          "Photoshop",
          "Illustrator",
        ],
      },
    };
  },

  methods: {
    // 1. í—¤ë” íƒ€ì´í•‘ ì• ë‹ˆë©”ì´ì…˜
    typeEn() {
      clearTimeout(this.timer);
      const currentIndex = this.index % this.texts.length;
      const currentFullText = this.texts[currentIndex].en;

      if (!this.isDeleting) {
        this.currentEnText = currentFullText.substring(0, this.enIndex + 1);
        this.enIndex++;
        if (this.enIndex >= currentFullText.length) {
          this.isDeleting = true;
          this.timer = setTimeout(this.typeEn, this.delayAfterTyping);
          return;
        }
      } else {
        this.currentEnText = currentFullText.substring(0, this.enIndex - 1);
        this.enIndex--;
        if (this.enIndex <= 0) {
          this.isDeleting = false;
          this.index = (this.index + 1) % this.texts.length;
        }
      }
      this.timer = setTimeout(
        this.typeEn,
        this.isDeleting ? this.deletingSpeed : this.typingSpeed
      );
    },

    initRollingText() {
      const wrappers = document.querySelectorAll(".rolling-content");
      if (wrappers.length === 0) return;

      wrappers.forEach((el, idx) => {
        const isSecondLine = idx === 1;
        const width = el.offsetWidth / 2; // ì „ì²´ ì»¨í…ì¸ ì˜ ì ˆë°˜

        const startX = isSecondLine ? -width : 0;
        const endX = isSecondLine ? 0 : -width;

        // 1. ê¸°ë³¸ ë¬´í•œ ë£¨í”„ ì„¤ì •
        gsap.set(el, { x: startX });
        const tl = gsap.to(el, {
          x: endX,
          duration: 35,
          ease: "none",
          repeat: -1,
        });

        // 2. ìŠ¤í¬ë¡¤ ì†ë„ ê°ì§€ ë° ê°€ì† (ScrollTrigger)
        ScrollTrigger.create({
          trigger: ".rolling-section",
          start: "top bottom",
          end: "bottom top",
          onUpdate: (self) => {
            // ìŠ¤í¬ë¡¤ ì†ë„ ê³„ì‚° (ì ˆëŒ€ê°’)
            const velocity = Math.abs(self.getVelocity() / 150);
            const speed = 1 + velocity;

            // ì†ë„ ì¦ê°€ (TimeScale ì¡°ì ˆ)
            gsap.to(tl, { timeScale: speed, duration: 0.3 });

            // ì›ë˜ ì†ë„ë¡œ ë¶€ë“œëŸ½ê²Œ ë³µê·€
            gsap.to(tl, { timeScale: 1, delay: 0.5, duration: 1 });
          },
        });

        // ë‚˜ì¤‘ì— í•´ì œí•˜ê¸° ìœ„í•´ ë°°ì—´ì— ì €ì¥
        this.rollingTls.push(tl);
      });
    },

    // 2. ì¸íŠ¸ë¡œ ì„¹ì…˜: ê¸€ì ìª¼ê°œê¸° ë° í•œ ê¸€ìì”© ì±„ì›Œì§€ëŠ” ì• ë‹ˆë©”ì´ì…˜
    initIntroAnimation() {
      const targets = document.querySelectorAll(".intro-section .split-text");
      if (targets.length === 0) return;

      targets.forEach((target) => {
        const content = target.innerHTML;
        target.innerHTML = "";

        // ğŸ’¡ ìˆ˜ì •ëœ ë¶€ë¶„: <br> íƒœê·¸ì™€ ê·¸ ì•ˆì˜ ì†ì„±(class ë“±)ê¹Œì§€ ëª¨ë‘ ìº¡ì²˜í•˜ë„ë¡ ì •ê·œì‹ ë³€ê²½
        const parts = content.split(/(<br[^>]*>)/i);

        parts.forEach((part) => {
          if (part.toLowerCase().startsWith("<br")) {
            // ë¶„ë¦¬ëœ partê°€ <br ...> í˜•íƒœë¼ë©´ HTMLë¡œ ì§ì ‘ ì‚½ì…
            target.innerHTML += part;
          } else {
            // ì¼ë°˜ í…ìŠ¤íŠ¸ì¼ ê²½ìš°ì—ë§Œ í•œ ê¸€ìì”© ìª¼ê°œì„œ span ìƒì„±
            [...part].forEach((char) => {
              const span = document.createElement("span");
              span.classList.add("char");
              span.innerText = char === " " ? "\u00A0" : char;
              target.appendChild(span);
            });
          }
        });
      });

      const enChars = document.querySelectorAll(".en-text .char");
      const krText = document.querySelector(".kr-text");

      const tl = gsap.timeline({
        scrollTrigger: {
          trigger: ".intro-section",
          start: "top top",
          end: "+=2000",
          pin: true,
          scrub: 1,
          anticipatePin: 1,
        },
      });

      tl.to(enChars, {
        color: "#fff",
        opacity: 1,
        stagger: 0.1,
        ease: "none",
      })
        .to(krText, {
          opacity: 1,
          y: 0,
          duration: 1,
          ease: "power2.out",
        })
        .to({}, { duration: 1 });
    },

    // 3. Bio ì„¹ì…˜: ì•„ë˜ì—ì„œ ìœ„ë¡œ ìˆœì°¨ì  ë“±ì¥
    initBioReveal() {
      const rows = document.querySelectorAll(
        ".bio-row, .row01, .row02, .row03 .row04"
      );
      rows.forEach((row) => {
        const children = row.children;
        gsap.set(children, { opacity: 0, y: 50 });
        gsap.to(children, {
          opacity: 1,
          y: 0,
          duration: 0.8,
          stagger: 0.2,
          ease: "back.out(1.7)",
          scrollTrigger: {
            trigger: row,
            start: "top 85%",
            toggleActions: "play none none reverse",
          },
        });
      });
    },

    // ê°€ë¡œ ìŠ¤í¬ë¡¤ ë©”ì¸ ì œì–´ (ëª¨ë“  ë‚´ë¶€ ì• ë‹ˆë©”ì´ì…˜ì˜ ê¸°ì¤€)
    initHorizontalScroll() {
      const horiSection = document.querySelector(".horizontal-section");
      const horiInner = document.querySelector(".horizontal-inner");
      const planet = document.querySelector(".planet-sphere");

      if (!horiSection || !horiInner) return;

      let mm = gsap.matchMedia();

      // âœ… 768px ì´ìƒ: ëª¨ë“  í™”ë ¤í•œ íš¨ê³¼ í™œì„±í™”
      mm.add("(min-width: 768px)", () => {
        // 1. ê°€ë¡œ ìŠ¤í¬ë¡¤ ë³¸ì²´
        const scrollTween = gsap.to(horiInner, {
          x: () => -(horiInner.scrollWidth - window.innerWidth),
          ease: "none",
          scrollTrigger: {
            trigger: horiSection,
            start: "top top",
            end: () => `+=${horiInner.scrollWidth}`,
            pin: true,
            scrub: 1,
            invalidateOnRefresh: true,
          },
        });

        // 2. ë“±ì¥ ì• ë‹ˆë©”ì´ì…˜ (reveal-text)
        const revealSections = document.querySelectorAll(".one-page");
        revealSections.forEach((section) => {
          const elements = section.querySelectorAll(
            ".reveal-text h2, .reveal-text p"
          );
          if (elements.length > 0) {
            gsap.to(elements, {
              clipPath: "inset(0 0% 0 0)",
              duration: 1.2,
              stagger: 0.3,
              ease: "power2.inOut",
              scrollTrigger: {
                trigger: section,
                containerAnimation: scrollTween,
                start: "left 70%",
                toggleActions: "play none none reverse",
              },
            });
          }

          // 3. ì›Œí¬í”Œë¡œìš° íƒœê·¸ ë“±ì¥
          const tags = section.querySelectorAll(".workflow-tags .tag");
          if (tags.length > 0) {
            gsap.fromTo(
              tags,
              { opacity: 0, x: 50 },
              {
                opacity: 1,
                x: 0,
                duration: 0.8,
                stagger: 0.4,
                ease: "back.out(1.2)",
                scrollTrigger: {
                  trigger: section,
                  containerAnimation: scrollTween,
                  start: "left 40%",
                  toggleActions: "play none none reverse",
                },
              }
            );
          }
        });

        // 4. ë°°ê²½ìƒ‰ ë° í–‰ì„± íš¨ê³¼
        ScrollTrigger.create({
          trigger: ".focus-section",
          containerAnimation: scrollTween,
          start: "left 60%",
          onEnter: () => {
            gsap.to(horiSection, { backgroundColor: "#000000", duration: 0.8 });
            if (planet)
              gsap.to(planet, { opacity: 1, scale: 1, duration: 1.2 });
          },
          onLeaveBack: () => {
            gsap.to(horiSection, { backgroundColor: "#ffffff", duration: 0.8 });
            if (planet)
              gsap.to(planet, { opacity: 0, scale: 0.5, duration: 0.8 });
          },
        });

        // 5. ê¸°íƒ€ ê°€ë¡œ ìŠ¤í¬ë¡¤ ì¢…ì† ë©”ì„œë“œ í˜¸ì¶œ
        this.initIdentityAnimation(scrollTween);
        this.initExperienceFloating(scrollTween);

        // âœ… ë¦¬í„´ í•¨ìˆ˜: ëª¨ë°”ì¼ë¡œ ëŒì•„ì˜¬ ë•Œ ëª¨ë“  ìŠ¤íƒ€ì¼ ì´ˆê¸°í™” (í•µì‹¬)
        return () => {
          gsap.set(".reveal-text h2, .reveal-text p", { clearProps: "all" });
          gsap.set(".workflow-tags .tag", { clearProps: "all" });
          gsap.set(horiInner, { clearProps: "all" });
          gsap.set(horiSection, { clearProps: "all" });
          if (planet) gsap.set(planet, { clearProps: "all" });
        };
      });

      // âœ… 768px ë¯¸ë§Œ (ëª¨ë°”ì¼): ì• ë‹ˆë©”ì´ì…˜ ì—†ì´ ì¦‰ì‹œ ë…¸ì¶œ
      mm.add("(max-width: 767px)", () => {
        // ëª¨ë°”ì¼ì—ì„œëŠ” clip-path ë“±ì„ ì œê±°í•˜ì—¬ í…ìŠ¤íŠ¸ê°€ ë°”ë¡œ ë³´ì´ê²Œ ì„¤ì •
        gsap.set(".reveal-text h2, .reveal-text p", {
          clipPath: "inset(0 0% 0 0)",
          opacity: 1,
          visibility: "visible",
        });
        gsap.set(".workflow-tags .tag", { opacity: 1, x: 0 });

        // ëª¨ë°”ì¼ì—ì„œëŠ” Identity ì•„ì´ì½˜ë„ ë‘¥ë‘¥ íš¨ê³¼ ì—†ì´ ê³ ì •
        const iconItems = document.querySelectorAll(".icon-item");
        iconItems.forEach((item) => {
          item.classList.remove("is-floating");
          gsap.set(item, { opacity: 1, scale: 1, y: 0 });
        });
      });
    },
    initFocus3DText() {
      const textElement = this.$refs.focusTxt;
      if (!textElement) return;

      const rawText = textElement.textContent.trim();
      const characters = rawText.split("");
      textElement.innerHTML = "";

      const isMobile = window.innerWidth < 768;
      const winW = window.innerWidth;

      // 1. íšŒì „ ë°˜ê²½ ì„¤ì • (ëª¨ë°”ì¼ì—ì„œ êµ¬ê°€ ë„ˆë¬´ ì»¤ì§€ì§€ ì•Šê²Œ ìƒí•œì„ )
      let radiusVal = isMobile
        ? Math.max(100, characters.length * 8)
        : Math.max(200, characters.length * 15);

      if (isMobile && radiusVal > winW * 0.35) {
        radiusVal = winW * 0.35;
      }

      const radius = -radiusVal;
      const duration = 25;

      // 2. êµ¬(Sphere) ìƒì„±
      const sphere = document.createElement("div");
      sphere.className = "sphere";
      // êµ¬ì²´ í¬ê¸°ë¥¼ ë°˜ê²½ë³´ë‹¤ ì•½ê°„ ì‘ê²Œ í•´ì„œ ê¸€ìê°€ êµ¬ì²´ë¥¼ 'ê°ì‹¸ë„ë¡' ì„¤ê³„
      const sphereSize = radiusVal * 1.8;

      Object.assign(sphere.style, {
        position: "absolute",
        left: "50%",
        top: "50%",
        width: `${sphereSize}px`,
        height: `${sphereSize}px`,
        background:
          "radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.02))",
        borderRadius: "50%",
        border: "1px solid rgba(255, 255, 255, 0.1)",
        backdropFilter: "blur(2px)",
        WebkitBackdropFilter: "blur(2px)",
        // âœ… í•µì‹¬: êµ¬ì²´ë¥¼ Zì¶• ë’¤ë¡œ ì•„ì£¼ ë©€ë¦¬ ë°€ì–´ëƒ…ë‹ˆë‹¤. (-200px ì´ìƒ)
        // ì´ë ‡ê²Œ í•´ì•¼ íšŒì „í•˜ëŠ” ê¸€ìê°€ êµ¬ì²´ ì•ìª½ ê³µê°„ì„ í™•ë³´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        transform: `translate(-50%, -50%) translateZ(${
          isMobile ? -250 : -300
        }px)`,
        zIndex: 0,
        pointerEvents: "none",
      });
      textElement.appendChild(sphere);

      // 3. ê¸€ì ìƒì„±
      const charElements = characters.map((char) => {
        const span = document.createElement("span");
        span.innerText = char === " " ? "\u00A0" : char;
        span.className = "char";
        Object.assign(span.style, {
          position: "absolute",
          left: "50%",
          top: "50%",
          display: "inline-block",
          // âœ… ê¸€ìì˜ íšŒì „ ì¤‘ì‹¬ì¶• ì„¤ì •
          transformOrigin: `50% 50% ${radius}px`,
          transformStyle: "preserve-3d",
          color: "#fff",
          fontSize: isMobile ? "12px" : "18px",
          fontWeight: "500",
          // âœ… ê¸€ìê°€ ì–´ë–¤ ìƒí™©ì—ì„œë„ êµ¬ì²´ë³´ë‹¤ ì•ì— ë³´ì´ë„ë¡ ë†’ì€ z-index ë¶€ì—¬
          zIndex: 10,
          pointerEvents: "none",
          backfaceVisibility: "visible",
        });
        textElement.appendChild(span);
        return span;
      });

      // 4. ì „ì²´ ì»¨í…Œì´ë„ˆ ì„¤ì •
      gsap.set(textElement, {
        rotationZ: 15,
        rotationX: 10,
        transformStyle: "preserve-3d",
        // âœ… ì›ê·¼ê°ì„ ë†’ì—¬ì„œ ì•ë’¤ ê±°ë¦¬ê°ì„ í™•ì‹¤í•˜ê²Œ ì¤ë‹ˆë‹¤.
        perspective: isMobile ? "1000px" : "1500px",
      });

      // 5. ì• ë‹ˆë©”ì´ì…˜ ë¡œì§
      const mainTl = gsap.timeline({ repeat: -1 });
      charElements.forEach((char, i) => {
        const startAngle = (i / charElements.length) * 360;
        mainTl.fromTo(
          char,
          {
            rotationY: startAngle,
            xPercent: -50,
            yPercent: -50,
            // ì‹œì‘ ì‹œì ì— ì‚´ì§ ì•ìœ¼ë¡œ ë‹¹ê²¨ì£¼ëŠ” ì´ˆê¸°ê°’ (í•„ìš”ì‹œ)
          },
          {
            rotationY: startAngle - 360,
            duration: duration,
            ease: "none",
          },
          0
        );
      });
    },

    // 2. Identity ì„¹ì…˜ ì• ë‹ˆë©”ì´ì…˜
    initIdentityAnimation(scrollTween) {
      const identitySec = document.querySelector(".identity-section");
      if (!identitySec) return;

      const titleTexts = identitySec.querySelectorAll(
        ".title-wrap h2, .title-wrap p"
      );
      const iconItems = identitySec.querySelectorAll(".icon-item");

      // 1. ì´ˆê¸° ìƒíƒœ ì„¤ì •
      gsap.set(titleTexts, { opacity: 0, y: 30 });
      gsap.set(iconItems, { opacity: 0, scale: 0.5, y: 20 });

      // 2. íƒ€ì„ë¼ì¸ ìƒì„±
      const tl = gsap.timeline({
        scrollTrigger: {
          trigger: identitySec,
          containerAnimation: scrollTween,
          start: "left 70%",
          toggleActions: "play none none reverse",
        },
      });

      tl.to(titleTexts, {
        opacity: 1,
        y: 0,
        duration: 0.6,
        stagger: 0.2,
      }).to(
        iconItems,
        {
          opacity: 1,
          scale: 1,
          y: 0,
          duration: 0.5,
          stagger: 0.15, // âœ… ìˆœì°¨ì ìœ¼ë¡œ ë‚˜íƒ€ë‚¨
          ease: "back.out(1.7)",
          // âœ… ë“±ì¥ì´ ì™„ë£Œë˜ë©´ CSS í´ë˜ìŠ¤ ì¶”ê°€í•˜ì—¬ ë‘¥ë‘¥ íš¨ê³¼ ì‹œì‘
          onComplete: () => {
            iconItems.forEach((item) => item.classList.add("is-floating"));
          },
        },
        "-=0.3"
      );
    },

    initExperienceFloating(scrollTween) {
      const container = document.querySelector(".experience-section .img-wrap");
      if (!container) return;

      const macbook = container.querySelector(".macbook-img");
      const symbol = container.querySelector(".code-symbol");
      const greeting = container.querySelector(".code-greeting");

      // 1. [ë“±ì¥] yPercentë¥¼ ì‚¬ìš©í•˜ì—¬ ìœ„ì¹˜ ì¶©ëŒì„ ë°©ì§€í•©ë‹ˆë‹¤.
      // CSSì˜ ì›ë˜ ìœ„ì¹˜(bottom 5%)ë¥¼ 0ìœ¼ë¡œ ì¡ê³ , ì•„ë˜(150%)ì—ì„œ ì˜¬ë¼ì˜¤ê²Œ í•©ë‹ˆë‹¤.
      gsap.fromTo(
        [macbook, symbol, greeting],
        {
          yPercent: 150, // y ëŒ€ì‹  yPercent ì‚¬ìš© (CSS ìœ„ì¹˜ ê¸°ì¤€ ì•„ë˜ìª½)
          opacity: 0,
          scale: 0.5,
        },
        {
          yPercent: 0, // ì œìë¦¬ë¡œ ë„ì°©
          opacity: 1,
          scale: 1,
          duration: 1.2,
          stagger: 0.1,
          ease: "back.out(1.5)",
          scrollTrigger: {
            trigger: ".experience-section",
            containerAnimation: scrollTween,
            start: "left 75%",
            toggleActions: "play none none reverse",
            // ë‚˜íƒ€ë‚˜ëŠ” ë„ì¤‘ì— ë‘¥ë‘¥ ëª¨ì…˜ì´ ì„ì´ì§€ ì•Šë„ë¡ ì™„ë£Œ í›„ ì‹¤í–‰
            onComplete: () => startFloating(),
          },
        }
      );

      // 2. [ë‘¥ë‘¥] y ê°’ì„ ìƒëŒ€ê°’("-=20")ìœ¼ë¡œ ì¡°ì ˆ
      const startFloating = () => {
        // ì´ë¯¸ ì• ë‹ˆë©”ì´ì…˜ì´ ëŒê³  ìˆë‹¤ë©´ ì¤‘ë³µ ë°©ì§€
        if (gsap.getTweensOf(macbook).length > 1) return;

        // ë§¥ë¶ ë³¸ì²´
        gsap.to(macbook, {
          y: "-=25",
          duration: 3,
          repeat: -1,
          yoyo: true,
          ease: "sine.inOut",
        });

        // ì½”ë“œ ì‹¬ë³¼
        gsap.to(symbol, {
          y: "+=30",
          x: "-=15",
          rotation: "-=8",
          duration: 2.5,
          repeat: -1,
          yoyo: true,
          ease: "sine.inOut",
          delay: 0.2,
        });

        // ì¸ì‚¬ë§
        gsap.to(greeting, {
          y: "-=35",
          x: "+=20",
          rotation: "+=5",
          duration: 4,
          repeat: -1,
          yoyo: true,
          ease: "sine.inOut",
          delay: 0.4,
        });
      };
    },
    initSkillsAnimation() {
      const section = this.$refs.skillsSection;
      const cards = gsap.utils.toArray(".skill-card");
      const bgTitle = this.$refs.bgTitle;
      const projectSection = document.querySelector(".project-section");

      if (!section || cards.length === 0 || !bgTitle || !projectSection) return;

      // ì´ˆê¸° ì„¸íŒ…: projectSectionì„ ë¯¸ë¦¬ ì•„ë˜ì— ëŒ€ê¸°ì‹œí‚´ (ë®ëŠ” íš¨ê³¼ë¥¼ ìœ„í•´)
      gsap.set(projectSection, { y: "100vh" });
      gsap.set(cards, { y: "110vh" });

      const tl = gsap.timeline({
        scrollTrigger: {
          trigger: section,
          start: "top top",
          // â­ ì—¬ë°± ë°©ì§€: ì¹´ë“œê°€ 6ê°œ ê¸°ì¤€ì´ë©´ ì•½ 600% ì •ë„ê°€ ì ë‹¹í•©ë‹ˆë‹¤.
          // ë„ˆë¬´ ê¸¸ë©´ ë§ˆì§€ë§‰ì— ë¹ˆ ê³µê°„ì´ ë‚¨ê³ , ì§§ìœ¼ë©´ ë®ê¸° ì „ì— ìŠ¤í¬ë¡¤ì´ ëë‚©ë‹ˆë‹¤.
          end: `+=${cards.length * 90}%`,
          pin: true,
          scrub: 0.5,
          pinSpacing: true,
          onRefresh: (self) => {
            // ìƒˆë¡œê³ ì¹¨ ì‹œ ìœ„ì¹˜ ì¬ê³„ì‚°
            if (self.progress > 0) self.animation.progress(1);
          },
        },
      });

      // 1 & 2. ìŠ¤í‚¬ ì¹´ë“œ ìˆœì°¨ ì• ë‹ˆë©”ì´ì…˜
      cards.forEach((card, index) => {
        const isLast = index === cards.length - 1;
        const startTime = index * 1.5;

        if (!isLast) {
          tl.to(
            card,
            {
              y: 0,
              duration: 1,
              ease: "none",
              onStart: () =>
                this.animateBgTitle(card.getAttribute("data-title")),
              onReverseComplete: () => {
                const prevTitle =
                  index > 0 ? cards[index - 1].getAttribute("data-title") : "";
                this.animateBgTitle(prevTitle);
              },
            },
            startTime
          ).to(card, { y: "-100vh", duration: 1, ease: "none" }, "+=0.3");
        } else {
          // ë§ˆì§€ë§‰ ì¹´ë“œ ë“±ì¥
          tl.to(
            card,
            {
              y: 0,
              duration: 1,
              ease: "none",
              onStart: () =>
                this.animateBgTitle(card.getAttribute("data-title")),
            },
            startTime
          );
        }
      });

      // â­ 3. í”„ë¡œì íŠ¸ ì„¹ì…˜ì´ ì•„ë˜(100vh)ì—ì„œ ìœ„(0)ë¡œ ì˜¬ë¼ì˜¤ë©° ìŠ¤í‚¬ ì„¹ì…˜ì„ ì™„ì „íˆ ë®ìŒ
      // íƒ€ì„ë¼ì¸ì˜ ê°€ì¥ ë§ˆì§€ë§‰ì— ë°°ì¹˜í•˜ì—¬ ì´ ë™ì‘ì´ ëë‚  ë•Œ ìŠ¤í¬ë¡¤ë„ ëë‚˜ê²Œ í•¨
      tl.to(
        projectSection,
        {
          y: 0, // ë®ìœ¼ë©´ì„œ ì˜¬ë¼ì˜´
          duration: 2,
          ease: "power2.inOut",
          onStart: () => {
            // ë®ì´ê¸° ì‹œì‘í•  ë•Œ íƒ€ì´í‹€ ì• ë‹ˆë©”ì´ì…˜ ì •ë¦¬ (í•„ìš”ì‹œ)
          },
          onReverseComplete: () => {
            const lastTitle =
              cards[cards.length - 1].getAttribute("data-title");
            this.animateBgTitle(lastTitle);
          },
        },
        "+=0.2"
      );
    },
    animateBgTitle(text) {
      const bgTitle = this.$refs.bgTitle;

      // ìš”ì†Œê°€ ì—†ê±°ë‚˜ í˜„ì¬ í…ìŠ¤íŠ¸ì™€ ë°”ê¿€ í…ìŠ¤íŠ¸ê°€ ì´ë¯¸ ê°™ë‹¤ë©´ ì¤‘ë‹¨
      if (!bgTitle || bgTitle.innerText === text) return;

      // ì§„í–‰ ì¤‘ì¸ ëª¨ë“  ì• ë‹ˆë©”ì´ì…˜ ê°•ì œ ì¢…ë£Œ (ì¤‘ì²© ë°©ì§€)
      gsap.killTweensOf(bgTitle);

      gsap
        .timeline()
        .to(bgTitle, {
          opacity: 0,
          duration: 0.2, // ì‚¬ë¼ì§€ëŠ” ì‹œê°„
          onComplete: () => {
            // ì¡°ê±´ ì—†ì´ ë¬´ì¡°ê±´ ì „ë‹¬ë°›ì€ textë¡œ êµì²´
            bgTitle.innerText = text;
          },
        })
        .to(bgTitle, {
          opacity: 1,
          duration: 0.3, // ë‚˜íƒ€ë‚˜ëŠ” ì‹œê°„
        });
    },
    initProjectSwiper() {
      // ì¤‘ë³µ ìƒì„± ë°©ì§€
      if (this.swiperInstance) {
        this.swiperInstance.destroy(true, true);
      }

      this.swiperInstance = new Swiper(".project-swiper", {
        modules: [Pagination, Autoplay],
        grabCursor: true,
        centeredSlides: true,
        slidesPerView: "auto",
        spaceBetween: 15,
        loop: true,
        loopedSlides: 6,
        loopPreventsSliding: false,
        speed: 600,
        autoplay: {
          delay: 3000,
          disableOnInteraction: false,
        },
        observer: true,
        observeParents: true,
        breakpoints: {
          768: {
            spaceBetween: 30,
          },
        },
      });
    },
    initVisionPhysics() {
      const container = this.$refs.canvasContainer;
      const mainTextEl = document.querySelector(".main-text");
      const subTextEl = document.querySelector(".sub-text");
      if (!container || !mainTextEl || !subTextEl) return;

      const { Engine, Render, Runner, Bodies, Composite, Events, Body } =
        Matter;

      // 1. ì—”ì§„ ë° ëŸ¬ë„ˆ ìƒì„±
      const engine = Engine.create();
      const runner = Runner.create();

      // â­ [ì¤‘ìš”] ì´ˆê¸° ë¡œë“œ ì‹œ ì—”ì§„ì´ ë©‹ëŒ€ë¡œ ëŒì•„ê°€ì§€ ì•Šê²Œ ë¬¼ë¦¬ ì—°ì‚°ì„ ë¹„í™œì„±í™”í•©ë‹ˆë‹¤.
      runner.enabled = false;

      const render = Render.create({
        element: container,
        engine: engine,
        options: {
          width: container.clientWidth,
          height: container.clientHeight,
          background: "transparent",
          wireframes: false,
          pixelRatio: window.devicePixelRatio || 1,
        },
      });

      const wallThickness = 100;

      // 2. ë²½ ìƒì„± ë¡œì§ (ê¸°ì¡´ê³¼ ë™ì¼)
      const ground = Bodies.rectangle(
        container.clientWidth / 2,
        container.clientHeight + wallThickness / 2,
        container.clientWidth,
        wallThickness,
        { isStatic: true, render: { visible: false } }
      );
      const leftWall = Bodies.rectangle(
        -wallThickness / 2,
        container.clientHeight / 2,
        wallThickness,
        container.clientHeight * 2,
        { isStatic: true, render: { visible: false } }
      );
      const rightWall = Bodies.rectangle(
        container.clientWidth + wallThickness / 2,
        container.clientHeight / 2,
        wallThickness,
        container.clientHeight * 2,
        { isStatic: true, render: { visible: false } }
      );

      const getRectBody = (el) => {
        const rect = el.getBoundingClientRect();
        const cRect = container.getBoundingClientRect();
        return Bodies.rectangle(
          rect.left - cRect.left + rect.width / 2,
          rect.top - cRect.top + rect.height / 2,
          rect.width,
          rect.height,
          { isStatic: true, render: { visible: false } }
        );
      };

      const mainWall = getRectBody(mainTextEl);
      const subWall = getRectBody(subTextEl);

      // 3. ë‹¨ì–´ ê°ì²´ ìƒì„± (ì´ˆê¸° ìœ„ì¹˜ëŠ” í™”ë©´ ë°– ì•„ì£¼ ë©€ë¦¬)
      const words = [
        "DESIGN",
        "RESPONSIVE",
        "PUBLISHING",
        "UX/UI",
        "SEMANTIC",
        "INTERACTIVE",
        "CLEAN CODE",
        "OPTIMIZED",
        "ACCESSIBILITY",
        "ANIMATION",
      ];
      const wordBodies = words.map((word, i) => {
        return Bodies.rectangle(
          Math.random() * container.clientWidth,
          -2000, // ë¡œë“œ ì‹œ ì ˆëŒ€ ë³´ì´ì§€ ì•Šê²Œ ì²˜ë¦¬
          word.length * 18 + 30,
          45,
          {
            restitution: 0.5,
            render: { fillStyle: "transparent", strokeStyle: "transparent" },
            friction: 0.1,
            label: word,
            chamfer: { radius: 22 },
          }
        );
      });

      Composite.add(engine.world, [
        ground,
        leftWall,
        rightWall,
        mainWall,
        subWall,
        ...wordBodies,
      ]);

      // 4. ì»¤ìŠ¤í…€ ë Œë”ë§ (ê¸°ì¡´ ìœ ì§€)
      Events.on(render, "afterRender", () => {
        const ctx = render.context;
        wordBodies.forEach((body) => {
          const { x, y } = body.position;
          const { angle, label } = body;
          const fixedWidth = label.length * 18 + 30;
          const fixedHeight = 45;
          ctx.save();
          ctx.translate(x, y);
          ctx.rotate(angle);
          ctx.beginPath();
          ctx.strokeStyle = "#ffffff";
          ctx.lineWidth = 1.2;
          ctx.roundRect(
            -fixedWidth / 2,
            -fixedHeight / 2,
            fixedWidth,
            fixedHeight,
            22
          );
          ctx.stroke();
          ctx.font = "500 20px IBM Plex Sans KR";
          ctx.fillStyle = "#ffffff";
          ctx.textAlign = "center";
          ctx.textBaseline = "middle";
          ctx.fillText(label, 0, 0);
          ctx.restore();
        });
      });

      // 5. ë Œë”ëŸ¬ëŠ” ë¯¸ë¦¬ ì¼œë‘ë˜, ì—”ì§„ì€ ëˆ ìƒíƒœ ìœ ì§€
      Render.run(render);

      // 6. â­ ScrollTrigger - ì´ ì„¹ì…˜ì´ ì‹¤ì œë¡œ 'í™”ë©´ ì•ˆ'ìœ¼ë¡œ ë“¤ì–´ì˜¬ ë•Œë§Œ ê°€ë™
      ScrollTrigger.create({
        trigger: ".vision-section",
        start: "top 70%", // ì„¹ì…˜ì´ í™”ë©´ í•˜ë‹¨ì—ì„œ 30% ì •ë„ ì˜¬ë¼ì™”ì„ ë•Œ
        onEnter: () => {
          // 1) ë‹¨ì–´ë“¤ì„ ë‹¤ì‹œ ë‚™í•˜ ëŒ€ê¸° ìœ„ì¹˜ë¡œ ìˆœê°„ì´ë™
          wordBodies.forEach((body, i) => {
            Body.setPosition(body, {
              x: Math.random() * (container.clientWidth - 100) + 50,
              y: -100 - i * 150,
            });
            Body.setVelocity(body, { x: 0, y: 0 }); // ì†ë„ ì´ˆê¸°í™”
          });

          // 2) ì´ì œì•¼ ì—”ì§„ì„ ì¼œê³  ë‚™í•˜ë¥¼ ì‹œì‘í•¨
          runner.enabled = true;
          Runner.run(runner, engine);
        },
        once: true, // í•œ ë²ˆë§Œ ì‹¤í–‰
      });

      return {
        engine,
        runner,
        render,
        stop() {
          Matter.Render.stop(render);
          Matter.Runner.stop(runner);
          Matter.World.clear(engine.world);
          Matter.Engine.clear(engine);
          render.canvas.remove();
        },
      };
    },
  },

  setup() {
    const blobEffect = shallowRef(null); // ë¶„ë¦¬ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë‹´ì„ ê³µê°„
    const containerRef = ref(null);
    const { x: mouseX, y: mouseY } = useMouse();

    const handleMouseMove = (e) => {
      gsap.to(".box", {
        duration: 0.6,
        rotationY: (i) =>
          45 +
          (i / projects.length) * 206.5 +
          90 * (e.clientX / window.innerWidth),
      });
    };

    const initGSAPProjectList = (container) => {
      if (!container || projects.length === 0) return;
      gsap.set(container, { perspective: 800 });
      projects.forEach((project, i) => {
        const b = document.createElement("div");
        b.classList.add("box");
        b.style.background = `hsl(${(i / projects.length) * 360}, 100%, 50%)`;
        container.appendChild(b);
        gsap.set(b, {
          position: "absolute",
          left: "50%",
          top: "50%",
          x: "-50%",
          y: "-50%",
          z: 600,
          width: 300,
          height: 600,
          borderRadius: 20,
          transformOrigin: "50% 50% 1200%",
          rotationY: 90 + (i / projects.length) * 206.5,
        });
      });
      window.addEventListener("mousemove", handleMouseMove);
    };

    return {
      mouseX,
      mouseY,
      containerRef,
      initGSAPProjectList,
      blobEffect,
      handleMouseMove,
    };
  },

  mounted() {
    history.scrollRestoration = "manual";
    this.animateBgTitle("HMTL");

    const canvas = document.getElementById("BlobBg");
    if (canvas) {
      this.blobEffect = initBlobBackground(canvas);
    }

    this.typeEn();

    this.$nextTick(() => {
      this.initBioReveal();
      this.initIntroAnimation();
      this.initHorizontalScroll();
      this.initSkillsAnimation();
      this.initRollingText();

      if (this.containerRef) this.initGSAPProjectList(this.containerRef);

      this.visionInstance = this.initVisionPhysics();

      setTimeout(() => {
        ScrollTrigger.refresh();
        this.initFocus3DText();
        this.initProjectSwiper();
      }, 100);
    });

    this.handleResize = () => {
      clearTimeout(this.resizeTimer);
      this.resizeTimer = setTimeout(() => {
        if (this.visionInstance) {
          this.visionInstance.stop();
          this.visionInstance = null;
        }
        this.visionInstance = this.initVisionPhysics();
        ScrollTrigger.refresh();
      }, 300);
    };

    window.addEventListener("resize", this.handleResize);
  },
  beforeUnmount() {
    clearTimeout(this.timer);
    clearTimeout(this.resizeTimer);

    if (this.blobEffect) this.blobEffect.destroy();
    if (this.visionInstance) this.visionInstance.stop();

    window.removeEventListener("resize", this.handleResize);
  },
};
</script>
